"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[395],{395:(e,s,t)=>{t.r(s),t.d(s,{AcceptMessage:()=>H,AcceptObserver:()=>O,ConnectMessage:()=>E,ConnectMessageObserver:()=>V,ConnectionRefusedError:()=>C,ErrorType:()=>y,ErrorTypeMap:()=>T,HandshakeMessage:()=>L,HandshakeObserver:()=>w,IncomingMessageType:()=>f,InvalidProviderError:()=>b,KeyReferrerMismatchError:()=>I,MP_SDK:()=>u,OutgoingMessageType:()=>m,RejectMessage:()=>B,RejectObserver:()=>N,connect:()=>k,version:()=>S});class n{constructor(e){this.targetWindow=e,this.messageObserver=null,this.onMessage=e=>{if(this.messageObserver){const s=e.data;this.messageObserver.notify(Object.assign({},s),{id:s.fromId,origin:e.origin,source:e.source},e.data.timestamp)}}}listen(e){this.messageObserver||(this.messageObserver=e,this.targetWindow.addEventListener("message",this.onMessage))}stopListening(){this.targetWindow.removeEventListener("message",this.onMessage),this.messageObserver=null}}class r{constructor(e,s="*"){this.targetWindow=e,this.targetOrigin=s}send(e,s){this.targetWindow.postMessage(e,this.targetOrigin)}}class i{constructor(e){this.messageReceiver=e}notify(e,s){this.messageReceiver.onMessageReceived(e,s)}}class o{constructor(){this.values={}}add(e,s){this.getValuesAtKey(e).push(s)}remove(e,s){const t=this.values[e];if(t){const e=t.indexOf(s);e>-1&&t.splice(e,1)}}removeKey(e){delete this.values[e]}getValuesAtKey(e){const s=this.values[e]||[];return this.values[e]=s,s}valuesPerKey(e){return this.getValuesAtKey(e).length}find(e,s){return this.values[e]&&this.values[e].find(s)}get keys(){return Object.keys(this.values)}hasKey(e){return e in this.values}has(e,s){return this.hasKey(e)&&this.values[e].includes(s)}*[Symbol.iterator](){for(const e in this.values)for(const s of this.values[e])yield[e,s]}}Symbol.iterator;class c{constructor(e,s){this.sourceId=e,this.listenerBridge=s,this.observers=new o}init(){const e=new class{constructor(e){this.messenger=e}onMessageReceived(e,s){this.messenger.onMessageReceived(e,s)}}(this),s=new i(e);this.listenerBridge.listen(s)}dispose(){this.listenerBridge.stopListening()}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e,s,t,n){t.send(Object.assign(Object.assign({},e),{fromId:this.sourceId,toId:s,timestamp:Date.now()}),n)}onMessageReceived(e,s){const t=e.type,n=this.observers.getValuesAtKey(t);if(n)for(const t of n){const n=e.payload||e;t.notify(n,s,e.timestamp)}}}class a{listen(){}stopListening(){}send(){throw Error("The sdk has been disconnected and can't make any new calls")}}class h{constructor(e,s,t){this.sourceId=e,this.targetId=s,this.messageBridge=t,this.observers=new o}static toFilteredMessenger(e,s,t){const n=new d(e.sourceId,e.targetId,e,s);for(const s of t)for(const t of e.observers.getValuesAtKey(s))n.addObserver(t);return n}init(){const e=new class{constructor(e){this.messenger=e}onMessageReceived(e,s){this.messenger.onMessageReceived(e,s)}}(this),s=new i(e);this.messageBridge.listen(s)}dispose(){this.messageBridge.stopListening(),this.messageBridge=new a}addObserver(e){this.observers.add(e.messageType,e)}removeObserver(e){this.observers.remove(e.messageType,e)}send(e){const s=this.sourceId,t=this.targetId;this.messageBridge.send(Object.assign(Object.assign({},e),{fromId:s,toId:t,timestamp:Date.now()}))}onMessageReceived(e,s){if(!this.filterMessageId(e))return;const t=e.type,n=this.observers.getValuesAtKey(t);if(n)for(const t of n){const n=e.payload||e;t.notify(n,s,e.timestamp)}}filterMessageId(e){const s=e.toId,t=e.fromId;return s instanceof Array?s.indexOf(this.sourceId)>-1:(void 0===s||s===this.sourceId)&&t===this.targetId}}class d extends h{constructor(e,s,t,n){super(e,s,new a),this.messenger=t,this.sendFilter=n,this.errorBridge=new a}send(e){this.sendFilter.includes(e.type)?this.messenger.send(e):this.errorBridge.send()}}class l{constructor(e,s,t="*"){this.sourceWindow=e,this.listener=new n(e),this.sender=new r(s,t)}listen(e){this.listener.listen(e)}stopListening(){this.listener.stopListening()}send(e){this.sender.send(e,this.sourceWindow)}}class g{constructor(e,s,t,n,r="*"){this.sourceId=e,this.sourceWindow=s,this.targetId=t,this.targetWindow=n,this.targetOrigin=r}createMessenger(){const e=new l(this.sourceWindow,this.targetWindow,this.targetOrigin);return new h(this.sourceId,this.targetId,e)}}var u,v=t(505),p=function(e,s,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?r(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(o,c)}a((n=n.apply(e,s||[])).next())}))};!function(e){const s=new v.o;e.connect=function(e,t,n){return p(this,void 0,void 0,(function*(){let r;try{r=yield e.connect()}finally{e.cancelConnecting()}const i=yield function(e){return p(this,void 0,void 0,(function*(){if(!e)throw new Error("Unabled to load the sdk");try{const t=yield s.load(e,"sdk-client");if(t&&t.SdkBuilder&&"function"==typeof t.SdkBuilder)return t.SdkBuilder}catch(e){}throw Error(`Could not load the sdk from ${e}`)}))}(r.scriptUrl),o=t.getFactory(r);return function(e,s,t,n){return new s(t,e).build(n)}(n,i,o,r.serializedInterface)}))}}(u||(u={}));var m,f,y;!function(e){e.CONNECT="postmessage.connect"}(m||(m={})),function(e){e.HANDSHAKE="postmessage.handshake",e.ACCEPT="postmessage.accept",e.REJECT="postmessage.reject"}(f||(f={}));class E{constructor(e,s={}){this.type=m.CONNECT,this.payload={bootstrapVersion:e,options:{auth:s.auth,provider:s.provider,sdkType:s.sdkType},applicationKey:s.applicationKey}}}class w{constructor(e){this.receiver=e,this.messageType=f.HANDSHAKE}notify(e,s,t){this.receiver.handshake()}}class O{constructor(e){this.receiver=e,this.messageType=f.ACCEPT}notify(e,s,t){const{sourceId:n,scriptUrl:r,targetId:i,targetOrigin:o}=e,c=e.interface;this.receiver.accept(n,r,c,i,o)}}!function(e){e.CANCELLED="ConnectionCancelled",e.REFUSED="ConnectionRefused",e.INVALID_PROVIDER="InvalidProvider",e.KEY_MISMATCH="KeyReferrerMismatch"}(y||(y={}));class C extends Error{constructor(){super(),this.type=y.REFUSED,this.name="ConnectionRefusedError"}}class b extends Error{constructor(e){super(e),this.type=y.INVALID_PROVIDER,this.name="InvalidProviderError"}}class I extends Error{constructor(e){super(e),this.type=y.KEY_MISMATCH,this.name="KeyReferrerMismatchError"}}const T={[y.REFUSED]:C,[y.KEY_MISMATCH]:I,[y.INVALID_PROVIDER]:b};class N{constructor(e){this.receiver=e,this.messageType=f.REJECT}notify(e,s,t){const n=T[e.errorType];if(n){const s=new n(e.reason);this.receiver.reject(s)}}}class M extends Error{constructor(e){super(e),this.type=y.CANCELLED,this.name="ConnectionCancelledError"}}var D;!function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.HANDSHAKE=2]="HANDSHAKE",e[e.CONNECTED=3]="CONNECTED",e[e.REJECTED=4]="REJECTED"}(D||(D={}));class A{constructor(e,s,t){this.messenger=e,this.target=s,this.source=t,this.connectionState=D.IDLE,this.connectionPoll=void 0;const n=new class{constructor(e){this.connector=e}handshake(){this.connector.handshake()}accept(e,s,t,n,r){this.connector.accept(e,s,t,n,r)}reject(e){this.connector.reject(e)}}(this);this.handshakeObserver=new w(n),this.acceptObserver=new O(n),this.rejectObserver=new N(n),this.connectionPromise=new Promise(((e,s)=>{this.resolveConnection=e,this.rejectConnection=s}))}connect(e,s={}){return this.connectionState===D.IDLE&&(this.connectionState=D.CONNECTING,this.messenger.addObserver(this.handshakeObserver),this.messenger.addObserver(this.acceptObserver),this.messenger.addObserver(this.rejectObserver),this.connectionPoll=window.setInterval((()=>{this.messenger.send(new E(e,s),-1,this.target,this.source)}),500)),this.connectionPromise}cancelConnecting(){this.connectionState<D.CONNECTED&&(this.stopConnectPolling(),this.rejectConnection(new M("User manually cancelled connection")))}handshake(){this.connectionState<D.HANDSHAKE&&(this.connectionState=D.HANDSHAKE,this.stopConnectPolling(),this.messenger.removeObserver(this.handshakeObserver))}accept(e,s,t,n,r){this.connectionState<D.CONNECTED&&(this.connectionState=D.CONNECTED,this.messenger.removeObserver(this.handshakeObserver),this.messenger.removeObserver(this.acceptObserver),this.messenger.removeObserver(this.rejectObserver),this.stopConnectPolling(),this.resolveConnection({sourceId:e,targetId:n,targetOrigin:r,scriptUrl:s,serializedInterface:t}))}reject(e){this.connectionState<D.CONNECTED&&(this.connectionState=D.REJECTED,this.messenger.removeObserver(this.handshakeObserver),this.messenger.removeObserver(this.acceptObserver),this.messenger.removeObserver(this.rejectObserver),this.stopConnectPolling(),this.rejectConnection(e))}stopConnectPolling(){clearInterval(this.connectionPoll),this.connectionPoll=void 0}}var R=function(e,s,t,n){return new(t||(t=Promise))((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function c(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var s;e.done?r(e.value):(s=e.value,s instanceof t?s:new t((function(e){e(s)}))).then(o,c)}a((n=n.apply(e,s||[])).next())}))};const S="3.0";function k(e,s={}){return R(this,void 0,void 0,(function*(){return"string"==typeof s?function(e,s){return console.warn("MP_SDK: connecting using an `applicationKey` argument is deprecated. Please add the key to the iframe's URL parameters instead."),K(e,{applicationKey:s})}(e,s):K(e,s)}))}function K(e,s={}){const t=(i=e).contentWindow?i.contentWindow:null;var i;if(!t)return Promise.reject("invalid window");const o=Math.floor(1e6*Math.random()),a=new n(window),h=new r(t),d=new c(o,a);d.init();const l=new A(d,h,window);return u.connect(new P(l,d,s),new j(t),window)}class P{constructor(e,s,t){this.connector=e,this.postMessage=s,this.options=t}connect(){return this.connector.connect(S,this.options)}cancelConnecting(){this.postMessage.dispose()}}class j{constructor(e){this.target=e}getFactory(e){return new g(e.sourceId,window,e.targetId,this.target,e.targetOrigin)}}class L{constructor(){this.type=f.HANDSHAKE,this.payload={}}}class H{constructor(e,s,t,n,r){this.type=f.ACCEPT,this.payload={scriptUrl:e,interface:s,sourceId:t,targetId:n,targetOrigin:r},this.interface=s}}class B{constructor(e){this.type=f.REJECT,this.payload={reason:e.message,errorType:e.type},this.reason=e.message}}class V{constructor(e){this.receiver=e,this.messageType=m.CONNECT}notify(e,s){this.receiver.onConnectionReceived(e,s)}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzk1LmluZGV4LmpzIiwibWFwcGluZ3MiOiI0ZkFRTyxNQUFNQSxFQU1YLFdBQUFDLENBQW9CQyxHQUFBLEtBQUFBLGFBQUFBLEVBSFosS0FBQUMsZ0JBQXlILEtBSy9IQyxLQUFLQyxVQUFhQyxJQUNoQixHQUFJRixLQUFLRCxnQkFBaUIsQ0FDeEIsTUFBTUksRUFBVUQsRUFBTUUsS0FDdEJKLEtBQUtELGdCQUFnQk0sT0FBTyxPQUFELFVBRXRCRixHQUNGLENBQ0RHLEdBQUlILEVBQVFJLE9BQ1pDLE9BQVFOLEVBQU1NLE9BQ2RDLE9BQVFQLEVBQU1PLFFBQ2JQLEVBQU1FLEtBQUtNLFUsRUFHcEIsQ0FPTyxNQUFBQyxDQUFPQyxHQUNQWixLQUFLRCxrQkFDUkMsS0FBS0QsZ0JBQWtCYSxFQUN2QlosS0FBS0YsYUFBYWUsaUJBQWlCLFVBQVdiLEtBQUtDLFdBRXZELENBS08sYUFBQWEsR0FDTGQsS0FBS0YsYUFBYWlCLG9CQUFvQixVQUFXZixLQUFLQyxXQUN0REQsS0FBS0QsZ0JBQWtCLElBQ3pCLEVBUUssTUFBTWlCLEVBSVgsV0FBQW5CLENBQW9CQyxFQUE4Qm1CLEVBQXVCLEtBQXJELEtBQUFuQixhQUFBQSxFQUE4QixLQUFBbUIsYUFBQUEsQ0FBOEIsQ0FPekUsSUFBQUMsQ0FBS2YsRUFBbUVnQixHQUM3RW5CLEtBQUtGLGFBQWFzQixZQUFZakIsRUFBU0gsS0FBS2lCLGFBQzlDLEVDM0RLLE1BQU1JLEVBQ1gsV0FBQXhCLENBQW9CeUIsR0FBQSxLQUFBQSxnQkFBQUEsQ0FBdUQsQ0FDcEUsTUFBQWpCLENBQU9GLEVBQXVFb0IsR0FDbkZ2QixLQUFLc0IsZ0JBQWdCRSxrQkFBa0JyQixFQUFTb0IsRUFDbEQsRUNaSyxNQUFNRSxFQUFiLGNBQ1UsS0FBQUMsT0FBdUMsQ0FBQyxDQWdHbEQsQ0F4RlMsR0FBQUMsQ0FBSUMsRUFBUUMsR0FDRzdCLEtBQUs4QixlQUFlRixHQUM1QkcsS0FBS0YsRUFDbkIsQ0FRTyxNQUFBRyxDQUFPSixFQUFRQyxHQUNwQixNQUFNSSxFQUFjakMsS0FBSzBCLE9BQU9FLEdBQ2hDLEdBQUlLLEVBQWEsQ0FDZixNQUFNQyxFQUFNRCxFQUFZRSxRQUFRTixHQUM1QkssR0FBTyxHQUNURCxFQUFZRyxPQUFPRixFQUFLLEUsQ0FHOUIsQ0FNTyxTQUFBRyxDQUFVVCxVQUNSNUIsS0FBSzBCLE9BQU9FLEVBQ3JCLENBUU8sY0FBQUUsQ0FBZUYsR0FDcEIsTUFBTUssRUFBY2pDLEtBQUswQixPQUFPRSxJQUFRLEdBRXhDLE9BREE1QixLQUFLMEIsT0FBT0UsR0FBT0ssRUFDWkEsQ0FDVCxDQU9PLFlBQUFLLENBQWFWLEdBQ2xCLE9BQU81QixLQUFLOEIsZUFBZUYsR0FBS1csTUFDbEMsQ0FFTyxJQUFBQyxDQUFLWixFQUFRYSxHQUNsQixPQUFPekMsS0FBSzBCLE9BQU9FLElBQVE1QixLQUFLMEIsT0FBT0UsR0FBS1ksS0FBS0MsRUFDbkQsQ0FLQSxRQUFXQyxHQUNULE9BQU9DLE9BQU9ELEtBQUsxQyxLQUFLMEIsT0FDMUIsQ0FNTyxNQUFBa0IsQ0FBT2hCLEdBQ1osT0FBT0EsS0FBTzVCLEtBQUswQixNQUNyQixDQU9PLEdBQUFtQixDQUFJakIsRUFBUWtCLEdBQ2pCLE9BQU85QyxLQUFLNEMsT0FBT2hCLElBQVE1QixLQUFLMEIsT0FBT0UsR0FBS21CLFNBQVNELEVBQ3ZELENBS08sRUFBRUUsT0FBT0MsWUFDZCxJQUFLLE1BQU1yQixLQUFPNUIsS0FBSzBCLE9BQ3JCLElBQUssTUFBTW9CLEtBQU85QyxLQUFLMEIsT0FBT0UsUUFDdEIsQ0FBQ0EsRUFBS2tCLEVBR2xCLEVDZFNFLE9BQU9DLFNDL0RYLE1BQU1DLEVBUVgsV0FBQXJELENBQW9Cc0QsRUFBMEJDLEdBQTFCLEtBQUFELFNBQUFBLEVBQTBCLEtBQUFDLGVBQUFBLEVBRnRDLEtBQUFDLFVBQW1ILElBQUk1QixDQUVmLENBS3pHLElBQUE2QixHQVFMLE1BQU1DLEVBQWtCLElBUHhCLE1BQ0UsV0FBQTFELENBQW9CMkQsR0FBQSxLQUFBQSxVQUFBQSxDQUE4RSxDQUMzRixpQkFBQWhDLENBQWtCckIsRUFBdUVvQixHQUM5RnZCLEtBQUt3RCxVQUFVaEMsa0JBQWtCckIsRUFBU29CLEVBQzVDLEdBRzJDdkIsTUFDdkN5RCxFQUFpQixJQUFJcEMsRUFBZWtDLEdBQzFDdkQsS0FBS29ELGVBQWV6QyxPQUFPOEMsRUFDN0IsQ0FLTyxPQUFBQyxHQUNMMUQsS0FBS29ELGVBQWV0QyxlQUN0QixDQU9PLFdBQUE2QyxDQUFZL0MsR0FDakJaLEtBQUtxRCxVQUFVMUIsSUFBSWYsRUFBU2dELFlBQWFoRCxFQUMzQyxDQU9PLGNBQUFpRCxDQUFlakQsR0FDcEJaLEtBQUtxRCxVQUFVckIsT0FBT3BCLEVBQVNnRCxZQUFhaEQsRUFDOUMsQ0FTTyxJQUFBTSxDQUNMZixFQUNBMkQsRUFDQUMsRUFDQXRELEdBRUFzRCxFQUFPN0MsS0FBSyxPQUFELHdCQUNOZixHQUFPLENBQ1ZJLE9BQVFQLEtBQUttRCxTQUNiYSxLQUFNRixFQUNOcEQsVUFBV3VELEtBQUtDLFFBQ2Z6RCxFQUNMLENBT1EsaUJBQUFlLENBQWtCckIsRUFBdUVvQixHQUMvRixNQUFNcUMsRUFBY3pELEVBQVFnRSxLQUN0QkMsRUFBbUJwRSxLQUFLcUQsVUFBVXZCLGVBQWU4QixHQUN2RCxHQUFJUSxFQUNGLElBQUssTUFBTXhELEtBQVl3RCxFQUFrQixDQUV2QyxNQUFNQyxFQUFVbEUsRUFBUWtFLFNBQVdsRSxFQUNuQ1MsRUFBU1AsT0FBT2dFLEVBQVM5QyxFQUFZcEIsRUFBUU8sVSxDQUduRCxFQ3hHSyxNQUFNNEQsRUFJSixNQUFBM0QsR0FBZ0IsQ0FLaEIsYUFBQUcsR0FBdUIsQ0FLdkIsSUFBQUksR0FDTCxNQUFNcUQsTUFBTSw2REFDZCxFQ0FLLE1BQU1DLEVBT1gsV0FBQTNFLENBQW9Cc0QsRUFBMEJXLEVBQTBCVyxHQUFwRCxLQUFBdEIsU0FBQUEsRUFBMEIsS0FBQVcsU0FBQUEsRUFBMEIsS0FBQVcsY0FBQUEsRUFGaEUsS0FBQXBCLFVBQW1ILElBQUk1QixDQUVnQixDQVN4SSwwQkFBT2lELENBQ1psQixFQUNBbUIsRUFDQUMsR0FFQSxNQUFNQyxFQUFvQixJQUFJQyxFQUFzRHRCLEVBQVVMLFNBQVVLLEVBQVVNLFNBQVVOLEVBQVdtQixHQUN2SSxJQUFLLE1BQU1JLEtBQVdILEVBQ3BCLElBQUssTUFBTWhFLEtBQVk0QyxFQUFVSCxVQUFVdkIsZUFBZWlELEdBQ3hERixFQUFrQmxCLFlBQVkvQyxHQUlsQyxPQUFPaUUsQ0FDVCxDQUlPLElBQUF2QixHQVFMLE1BQU1DLEVBQWtCLElBUHhCLE1BQ0UsV0FBQTFELENBQW9CMkQsR0FBQSxLQUFBQSxVQUFBQSxDQUEyRCxDQUN4RSxpQkFBQWhDLENBQWtCckIsRUFBdUVvQixHQUM5RnZCLEtBQUt3RCxVQUFVaEMsa0JBQWtCckIsRUFBU29CLEVBQzVDLEdBRzBDdkIsTUFDdEN5RCxFQUFpQixJQUFJcEMsRUFBZWtDLEdBQzFDdkQsS0FBS3lFLGNBQWM5RCxPQUFPOEMsRUFDNUIsQ0FLTyxPQUFBQyxHQUNMMUQsS0FBS3lFLGNBQWMzRCxnQkFDbkJkLEtBQUt5RSxjQUFnQixJQUFJSCxDQUMzQixDQU9PLFdBQUFYLENBQVlxQixHQUNqQmhGLEtBQUtxRCxVQUFVMUIsSUFBSXFELEVBQUVwQixZQUFhb0IsRUFDcEMsQ0FPTyxjQUFBbkIsQ0FBZW1CLEdBQ3BCaEYsS0FBS3FELFVBQVVyQixPQUFPZ0QsRUFBRXBCLFlBQWFvQixFQUN2QyxDQU9PLElBQUE5RCxDQUFLZixHQUNWLE1BQU1JLEVBQVNQLEtBQUttRCxTQUNkYSxFQUFPaEUsS0FBSzhELFNBQ2xCOUQsS0FBS3lFLGNBQWN2RCxLQUFLLE9BQUQsd0JBQ2xCZixHQUFPLENBQ1ZJLFNBQ0F5RCxPQUNBdEQsVUFBV3VELEtBQUtDLFFBRXBCLENBT1EsaUJBQUExQyxDQUFrQnJCLEVBQXVFb0IsR0FDL0YsSUFBS3ZCLEtBQUtpRixnQkFBZ0I5RSxHQUFVLE9BRXBDLE1BQU15RCxFQUFjekQsRUFBUWdFLEtBQ3RCQyxFQUFtQnBFLEtBQUtxRCxVQUFVdkIsZUFBZThCLEdBQ3ZELEdBQUlRLEVBQ0YsSUFBSyxNQUFNeEQsS0FBWXdELEVBQWtCLENBRXZDLE1BQU1DLEVBQVVsRSxFQUFRa0UsU0FBV2xFLEVBQ25DUyxFQUFTUCxPQUFPZ0UsRUFBUzlDLEVBQVlwQixFQUFRTyxVLENBR25ELENBTVEsZUFBQXVFLENBQWdCOUUsR0FDdEIsTUFBTTZELEVBQU83RCxFQUFRNkQsS0FDZnpELEVBQVNKLEVBQVFJLE9BQ3ZCLE9BQUl5RCxhQUFnQmtCLE1BQ1hsQixFQUFLN0IsUUFBUW5DLEtBQUttRCxXQUFhLFFBSXZCZ0MsSUFBVG5CLEdBQXNCQSxJQUFTaEUsS0FBS21ELFdBQWE1QyxJQUFXUCxLQUFLOEQsUUFDM0UsRUFNRixNQUFNZ0IsVUFHSU4sRUFHUixXQUFBM0UsQ0FDRXNELEVBQ0FXLEVBQ1FOLEVBQ0FtQixHQUdSUyxNQUFNakMsRUFBVVcsRUFBVSxJQUFJUSxHQUp0QixLQUFBZCxVQUFBQSxFQUNBLEtBQUFtQixXQUFBQSxFQUlSM0UsS0FBS3FGLFlBQWMsSUFBSWYsQ0FDekIsQ0FFTyxJQUFBcEQsQ0FBS2YsR0FDTkgsS0FBSzJFLFdBQVc1QixTQUFTNUMsRUFBUWdFLE1BQ25DbkUsS0FBS3dELFVBQVV0QyxLQUFLZixHQUVwQkgsS0FBS3FGLFlBQVluRSxNQUVyQixFQ2hLSyxNQUFNb0UsRUFPWCxXQUFBekYsQ0FBb0IwRixFQUFzQnpGLEVBQXNCbUIsRUFBdUIsS0FBbkUsS0FBQXNFLGFBQUFBLEVBQ2xCdkYsS0FBS3dGLFNBQVcsSUFBSTVGLEVBQW9CMkYsR0FDeEN2RixLQUFLeUYsT0FBUyxJQUFJekUsRUFBa0JsQixFQUFjbUIsRUFDcEQsQ0FPTyxNQUFBTixDQUFPQyxHQUNaWixLQUFLd0YsU0FBUzdFLE9BQU9DLEVBQ3ZCLENBS08sYUFBQUUsR0FDTGQsS0FBS3dGLFNBQVMxRSxlQUNoQixDQU9PLElBQUFJLENBQUtmLEdBQ1ZILEtBQUt5RixPQUFPdkUsS0FBS2YsRUFBU0gsS0FBS3VGLGFBQ2pDLEVDdENLLE1BQU1HLEVBQ1gsV0FBQTdGLENBQ1VzRCxFQUEwQm9DLEVBQzFCekIsRUFBMEJoRSxFQUE4Qm1CLEVBQXVCLEtBRC9FLEtBQUFrQyxTQUFBQSxFQUEwQixLQUFBb0MsYUFBQUEsRUFDMUIsS0FBQXpCLFNBQUFBLEVBQTBCLEtBQUFoRSxhQUFBQSxFQUE4QixLQUFBbUIsYUFBQUEsQ0FBOEIsQ0FPekYsZUFBQTBFLEdBQ0wsTUFBTUMsRUFBb0IsSUFBSU4sRUFBc0R0RixLQUFLdUYsYUFBY3ZGLEtBQUtGLGFBQWNFLEtBQUtpQixjQUUvSCxPQURrQixJQUFJdUQsRUFBOEN4RSxLQUFLbUQsU0FBVW5ELEtBQUs4RCxTQUFVOEIsRUFFcEcsRSxJQ0dlQyxFLGdUQUFqQixTQUFpQkEsR0FDZixNQUFNQyxFQUFZLElBQUlDLEVBQUEsRUFDQSxFQUFBQyxRQUF0QixTQUNFQyxFQUNBQyxFQUNBQyxHLHlDQUVBLElBQUlDLEVBQ0osSUFDRUEsUUFBd0JILEVBQVVELFMsU0FHbENDLEVBQVVJLGtCLENBSVosTUFBTUMsUUFPUixTQUEyQkMsRyx5Q0FDekIsSUFBS0EsRUFDSCxNQUFNLElBQUloQyxNQUFNLDJCQUlsQixJQUNFLE1BQU1pQyxRQUFrQlYsRUFBVVcsS0FBc0NGLEVBQUssY0FDN0UsR0FBSUMsR0FBYUEsRUFBVUUsWUFBOEMsbUJBQXpCRixFQUFVRSxXQUN4RCxPQUFPRixFQUFVRSxVLENBRW5CLFMsQ0FHRixNQUFNbkMsTUFBTSwrQkFBK0JnQyxJQUM3QyxHLENBdEJ3QkksQ0FBWVAsRUFBZ0JRLFdBRTVDQyxFQUFtQlgsRUFBZVksV0FBV1YsR0FFbkQsT0FvQkYsU0FDRUQsRUFDQVksRUFDQUYsRUFDQUcsR0FFQSxPQUFPLElBQUlELEVBQVdGLEVBQWtCVixHQUFlYyxNQUFNRCxFQUMvRCxDQTNCU0UsQ0FBZWYsRUFBZUcsRUFBU08sRUFBa0JULEVBQWdCWSxvQkFDbEYsRyxDQTJCRCxDQWhERCxDQUFpQm5CLElBQUFBLEVBQU0sS0NyQnZCLElBQVlzQixFQStCQUMsRUNsQ0FDLEdER1osU0FBWUYsR0FDViwrQkFDRCxDQUZELENBQVlBLElBQUFBLEVBQW1CLEtBK0IvQixTQUFZQyxHQUNWLG9DQUNBLDhCQUNBLDZCQUNELENBSkQsQ0FBWUEsSUFBQUEsRUFBbUIsS0U3QnhCLE1BQU1FLEVBSVgsV0FBQXpILENBQVkwSCxFQUEwQkMsRUFBc0MsQ0FBQyxHQUg3RCxLQUFBckQsS0FBT2dELEVBQW9CTSxRQUl6Q3pILEtBQUtxRSxRQUFVLENBQ2JrRCxtQkFDQUMsUUFBUyxDQUNQRSxLQUFNRixFQUFRRSxLQUNkQyxTQUFVSCxFQUFRRyxTQUNsQkMsUUFBU0osRUFBUUksU0FFbkJDLGVBQWdCTCxFQUFRSyxlQUU1QixFQ1hLLE1BQU1DLEVBRVgsV0FBQWpJLENBQW9Ca0ksR0FBQSxLQUFBQSxTQUFBQSxFQURKLEtBQUFuRSxZQUFjd0QsRUFBb0JZLFNBQ0MsQ0FFNUMsTUFBQTNILENBQU80SCxFQUE4QkMsRUFBeUJDLEdBQ25FbkksS0FBSytILFNBQVNLLFdBQ2hCLEVDSkssTUFBTUMsRUFFWCxXQUFBeEksQ0FBb0JrSSxHQUFBLEtBQUFBLFNBQUFBLEVBREosS0FBQW5FLFlBQWN3RCxFQUFvQmtCLE1BQ0gsQ0FFeEMsTUFBQWpJLENBQU9rSSxFQUF1QkwsRUFBeUJDLEdBQzVELE1BQU0sU0FBRWhGLEVBQVEsVUFBRXlELEVBQVMsU0FBRTlDLEVBQVEsYUFBRTdDLEdBQWlCc0gsRUFDbER2QixFQUFzQnVCLEVBQU9DLFVBRW5DeEksS0FBSytILFNBQVNRLE9BQU9wRixFQUFVeUQsRUFBV0ksRUFBcUJsRCxFQUFVN0MsRUFDM0UsR0huQkYsU0FBWW9HLEdBQ1Ysa0NBQ0EsOEJBQ0EscUNBQ0Esb0NBQ0QsQ0FMRCxDQUFZQSxJQUFBQSxFQUFTLEtJRWQsTUFBTW9CLFVBQStCbEUsTUFFMUMsV0FBQTFFLEdBQ0V1RixRQUZjLEtBQUFqQixLQUFrQmtELEVBQVVxQixRQUcxQzFJLEtBQUsySSxLQUFPLHdCQUNkLEVDTEssTUFBTUMsVUFBNkJyRSxNQUV4QyxXQUFBMUUsQ0FBWU0sR0FDVmlGLE1BQU1qRixHQUZRLEtBQUFnRSxLQUFrQmtELEVBQVV3QixpQkFHMUM3SSxLQUFLMkksS0FBTyxzQkFDZCxFQ0xLLE1BQU1HLFVBQWlDdkUsTUFFNUMsV0FBQTFFLENBQVlNLEdBQ1ZpRixNQUFNakYsR0FGUSxLQUFBZ0UsS0FBa0JrRCxFQUFVMEIsYUFHMUMvSSxLQUFLMkksS0FBTywwQkFDZCxFQ0lLLE1BQU1LLEVBQXNGLENBQ2pHLENBQUMzQixFQUFVcUIsU0FBVUQsRUFDckIsQ0FBQ3BCLEVBQVUwQixjQUFlRCxFQUMxQixDQUFDekIsRUFBVXdCLGtCQUFtQkQsR0NKekIsTUFBTUssRUFFWCxXQUFBcEosQ0FBb0JrSSxHQUFBLEtBQUFBLFNBQUFBLEVBREosS0FBQW5FLFlBQWN3RCxFQUFvQjhCLE1BQ0gsQ0FFeEMsTUFBQTdJLENBQU84SSxFQUF1QmpCLEVBQXlCQyxHQUM1RCxNQUFNaUIsRUFBWUosRUFBYUcsRUFBT0MsV0FDdEMsR0FBSUEsRUFBVyxDQUNiLE1BQU1DLEVBQVEsSUFBSUQsRUFBVUQsRUFBT0csUUFDbkN0SixLQUFLK0gsU0FBU29CLE9BQU9FLEUsQ0FFekIsRUNsQkssTUFBTUUsVUFBaUNoRixNQUU1QyxXQUFBMUUsQ0FBWU0sR0FDVmlGLE1BQU1qRixHQUZRLEtBQUFnRSxLQUFrQmtELEVBQVVtQyxVQUcxQ3hKLEtBQUsySSxLQUFPLDBCQUNkLEVDTUYsSUFBS2MsR0FBTCxTQUFLQSxHQUNILG1CQUNBLCtCQUNBLDZCQUNBLDZCQUNBLDBCQUNELENBTkQsQ0FBS0EsSUFBQUEsRUFBZSxLQXFCYixNQUFNQyxFQVdYLFdBQUE3SixDQUNVMkQsRUFDQU8sRUFDQXRELEdBRkEsS0FBQStDLFVBQUFBLEVBQ0EsS0FBQU8sT0FBQUEsRUFDQSxLQUFBdEQsT0FBQUEsRUFiRixLQUFBa0osZ0JBQW1DRixFQUFnQkcsS0FDbkQsS0FBQUMsb0JBQXFDMUUsRUEyQjNDLE1BQU0yRSxFQUFrQixJQWJ4QixNQUNFLFdBQUFqSyxDQUFvQm9HLEdBQUEsS0FBQUEsVUFBQUEsQ0FBZ0MsQ0FDN0MsU0FBQW1DLEdBQ0xwSSxLQUFLaUcsVUFBVW1DLFdBQ2pCLENBQ08sTUFBQUcsQ0FBT3BGLEVBQWtCeUQsRUFBbUJJLEVBQTJCbEQsRUFBa0I3QyxHQUM5RmpCLEtBQUtpRyxVQUFVc0MsT0FBT3BGLEVBQVV5RCxFQUFXSSxFQUFxQmxELEVBQVU3QyxFQUM1RSxDQUNPLE1BQUFrSSxDQUFPRyxHQUNadEosS0FBS2lHLFVBQVVrRCxPQUFPRyxFQUN4QixHQUcwQ3RKLE1BRTVDQSxLQUFLK0osa0JBQW9CLElBQUlqQyxFQUFrQmdDLEdBQy9DOUosS0FBS2dLLGVBQWlCLElBQUkzQixFQUFleUIsR0FDekM5SixLQUFLaUssZUFBaUIsSUFBSWhCLEVBQWVhLEdBQ3pDOUosS0FBS2tLLGtCQUFvQixJQUFJQyxTQUFRLENBQUNDLEVBQUtDLEtBQ3pDckssS0FBS3NLLGtCQUFvQkYsRUFDekJwSyxLQUFLdUssaUJBQW1CRixDQUFHLEdBRS9CLENBRU8sT0FBQXJFLENBQVF3RSxFQUFpQmhELEVBQXNDLENBQUMsR0FhckUsT0FaSXhILEtBQUsySixrQkFBb0JGLEVBQWdCRyxPQUMzQzVKLEtBQUsySixnQkFBa0JGLEVBQWdCZ0IsV0FDdkN6SyxLQUFLd0QsVUFBVUcsWUFBWTNELEtBQUsrSixtQkFDaEMvSixLQUFLd0QsVUFBVUcsWUFBWTNELEtBQUtnSyxnQkFDaENoSyxLQUFLd0QsVUFBVUcsWUFBWTNELEtBQUtpSyxnQkFFaENqSyxLQUFLNkosZUFBaUJhLE9BQU9DLGFBQVksS0FFdkMzSyxLQUFLd0QsVUFBVXRDLEtBQUssSUFBSW9HLEVBQWVrRCxFQUFTaEQsSUN1QzlCLEVEdkNvRHhILEtBQUsrRCxPQUFRL0QsS0FBS1MsT0FBTyxHQUM5RixNQUdFVCxLQUFLa0ssaUJBQ2QsQ0FFTyxnQkFBQTdELEdBQ0RyRyxLQUFLMkosZ0JBQWtCRixFQUFnQm1CLFlBQ3pDNUssS0FBSzZLLHFCQUNMN0ssS0FBS3VLLGlCQUFpQixJQUFJaEIsRUFBeUIsdUNBRXZELENBRVEsU0FBQW5CLEdBQ0ZwSSxLQUFLMkosZ0JBQWtCRixFQUFnQnpCLFlBQ3pDaEksS0FBSzJKLGdCQUFrQkYsRUFBZ0J6QixVQUN2Q2hJLEtBQUs2SyxxQkFFTDdLLEtBQUt3RCxVQUFVSyxlQUFlN0QsS0FBSytKLG1CQUV2QyxDQUVRLE1BQUF4QixDQUFPcEYsRUFBa0J5RCxFQUFtQkksRUFBMkJsRCxFQUFrQjdDLEdBQzNGakIsS0FBSzJKLGdCQUFrQkYsRUFBZ0JtQixZQUN6QzVLLEtBQUsySixnQkFBa0JGLEVBQWdCbUIsVUFFdkM1SyxLQUFLd0QsVUFBVUssZUFBZTdELEtBQUsrSixtQkFDbkMvSixLQUFLd0QsVUFBVUssZUFBZTdELEtBQUtnSyxnQkFDbkNoSyxLQUFLd0QsVUFBVUssZUFBZTdELEtBQUtpSyxnQkFDbkNqSyxLQUFLNksscUJBRUw3SyxLQUFLc0ssa0JBQWtCLENBQ3JCbkgsV0FDQVcsV0FDQTdDLGVBQ0EyRixZQUNBSSx3QkFHTixDQUVRLE1BQUFtQyxDQUFPRyxHQUNUdEosS0FBSzJKLGdCQUFrQkYsRUFBZ0JtQixZQUN6QzVLLEtBQUsySixnQkFBa0JGLEVBQWdCcUIsU0FFdkM5SyxLQUFLd0QsVUFBVUssZUFBZTdELEtBQUsrSixtQkFDbkMvSixLQUFLd0QsVUFBVUssZUFBZTdELEtBQUtnSyxnQkFDbkNoSyxLQUFLd0QsVUFBVUssZUFBZTdELEtBQUtpSyxnQkFDbkNqSyxLQUFLNksscUJBRUw3SyxLQUFLdUssaUJBQWlCakIsR0FFMUIsQ0FFUSxrQkFBQXVCLEdBQ05FLGNBQWMvSyxLQUFLNkosZ0JBQ25CN0osS0FBSzZKLG9CQUFpQjFFLENBQ3hCLEUsMFNFcklLLE1BQU1xRixFQUFVLE1BSWhCLFNBQWV4RSxFQUFRbEcsRUFBaUMwSCxFQUE0QyxDQUFDLEcseUNBQzFHLE1BQXVCLGlCQUFaQSxFQWNiLFNBQW1DMUgsRUFBaUMrSCxHQUVsRSxPQURBbUQsUUFBUUMsS0FBSyxtSUFDTkMsRUFBbUJwTCxFQUFjLENBQ3RDK0gsa0JBRUosQ0FsQldzRCxDQUEwQnJMLEVBQWMwSCxHQUV4QzBELEVBQW1CcEwsRUFBYzBILEVBRTVDLEcsQ0FxQkEsU0FBUzBELEVBQW1CcEwsRUFBaUMwSCxFQUFzQyxDQUFDLEdBQ2xHLE1BQU16RCxHQWVXcUgsRUFmUXRMLEdBZ0JidUwsY0FBc0JELEVBQVFDLGNBQ25DLEtBRlQsSUFBbUJELEVBZGpCLElBQUtySCxFQUFRLE9BQU9vRyxRQUFRaEIsT0FBTyxrQkFHbkMsTUFBTWhHLEVBQVdtSSxLQUFLQyxNQUFzQixJQUFoQkQsS0FBS0UsVUFDM0JDLEVBQXNCLElBQUk3TCxFQUFxQzhLLFFBQy9EZ0IsRUFBbUIsSUFBSTFLLEVBQW1DK0MsR0FDMUQzQyxFQUFjLElBQUk4QixFQUE4REMsRUFBVXNJLEdBQ2hHckssRUFBWWtDLE9BR1osTUFBTTJDLEVBQVksSUFBSXlELEVBQWtCdEksRUFBYXNLLEVBQWtCaEIsUUFDdkUsT0FBTzdFLEVBQU9HLFFBQVEsSUFBSTJGLEVBQWUxRixFQUFXN0UsRUFBYW9HLEdBQVUsSUFBSW9FLEVBQTZCN0gsR0FBUzJHLE9BQ3ZILENBT0EsTUFBTWlCLEVBQ0osV0FBQTlMLENBQ1VvRyxFQUNBN0UsRUFDQW9HLEdBRkEsS0FBQXZCLFVBQUFBLEVBQ0EsS0FBQTdFLFlBQUFBLEVBQ0EsS0FBQW9HLFFBQUFBLENBQ1AsQ0FDSSxPQUFBeEIsR0FDTCxPQUFPaEcsS0FBS2lHLFVBQVVELFFBQVF3RSxFQUFTeEssS0FBS3dILFFBQzlDLENBRU8sZ0JBQUFuQixHQUNMckcsS0FBS29CLFlBQVlzQyxTQUNuQixFQUdGLE1BQU1rSSxFQUNKLFdBQUEvTCxDQUFvQmtFLEdBQUEsS0FBQUEsT0FBQUEsQ0FBaUIsQ0FDOUIsVUFBQStDLENBQVdWLEdBQ2hCLE9BQU8sSUFBSVYsRUFBbUJVLEVBQWdCakQsU0FBVXVILE9BQVF0RSxFQUFnQnRDLFNBQVU5RCxLQUFLK0QsT0FBUXFDLEVBQWdCbkYsYUFDekgsRUMzRUssTUFBTTRLLEVBSVgsV0FBQWhNLEdBSGdCLEtBQUFzRSxLQUFPaUQsRUFBb0JZLFVBSXpDaEksS0FBS3FFLFFBQVUsQ0FBQyxDQUNsQixFQ05LLE1BQU15SCxFQU9YLFdBQUFqTSxDQUFZK0csRUFBbUJtRixFQUEwQzVJLEVBQWtCVyxFQUFrQjdDLEdBTjdGLEtBQUFrRCxLQUFPaUQsRUFBb0JrQixPQU96Q3RJLEtBQUtxRSxRQUFVLENBQ2J1QyxZQUNBNEIsVUFBV3VELEVBQ1g1SSxXQUNBVyxXQUNBN0MsZ0JBRUZqQixLQUFLd0ksVUFBWXVELENBQ25CLEVDZkssTUFBTUMsRUFNWCxXQUFBbk0sQ0FBWXdKLEdBTEksS0FBQWxGLEtBQU9pRCxFQUFvQjhCLE9BTXpDbEosS0FBS3FFLFFBQVUsQ0FDYmlGLE9BQVFELEVBQU1sSixRQUNkaUosVUFBV0MsRUFBTWxGLE1BRW5CbkUsS0FBS3NKLE9BQVNELEVBQU1sSixPQUN0QixFQ0ZLLE1BQU04TCxFQUVYLFdBQUFwTSxDQUFvQmtJLEdBQUEsS0FBQUEsU0FBQUEsRUFESixLQUFBbkUsWUFBY3VELEVBQW9CTSxPQUNFLENBRTdDLE1BQUFwSCxDQUFPMkYsRUFBeUJ6RSxHQUNyQ3ZCLEtBQUsrSCxTQUFTbUUscUJBQXFCbEcsRUFBU3pFLEVBQzlDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9wb3N0bWVzc2FnZS9VbmRpcmVjdGVkUG9zdE1lc3NhZ2VCcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvTWVzc2VuZ2VyL0JyaWRnZU9ic2VydmVyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3V0aWwvRGljdEFycmF5L0RpY3RBcnJheS50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy91dGlsL0RpY3RBcnJheS9NYXBTZXQudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvTWVzc2VuZ2VyL1VuZGlyZWN0ZWRNZXNzZW5nZXIudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL21lc3NlbmdlcnMvZXJyb3JtZXNzYWdlL0Vycm9yTWVzc2FnZUJyaWRnZS50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9NZXNzZW5nZXIvTWVzc2VuZ2VyLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9tZXNzZW5nZXJzL3Bvc3RtZXNzYWdlL1Bvc3RNZXNzYWdlQnJpZGdlLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9tZXNzZW5nZXJzL3Bvc3RtZXNzYWdlL1Bvc3RNZXNzYWdlRmFjdG9yeS50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NUF9TREsudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZVR5cGVzLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Vycm9ycy90eXBlLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01lc3NhZ2VzL0Nvbm5lY3RNZXNzYWdlLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01lc3NhZ2VPYnNlcnZlcnMvSGFuZHNoYWtlT2JzZXJ2ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZU9ic2VydmVycy9BY2NlcHRPYnNlcnZlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9FcnJvcnMvQ29ubmVjdGlvblJlZnVzZWQudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvRXJyb3JzL0ludmFsaWRQcm92aWRlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9FcnJvcnMvS2V5UmVmZXJyZXJNaXNtYXRjaC50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9FcnJvcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZU9ic2VydmVycy9SZWplY3RPYnNlcnZlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9FcnJvcnMvQ2FuY2VsbGVkLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL0Nvbm5lY3Rvci9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvbWVzc2VuZ2Vycy9NZXNzZW5nZXIvSU1lc3Nlbmdlci50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlcy9IYW5kc2hha2VNZXNzYWdlLnRzIiwid2VicGFjazovLy8uL3BhY2thZ2VzL3Nkay9ib290c3RyYXAvc3JjL01lc3NhZ2VzL0FjY2VwdE1lc3NhZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vcGFja2FnZXMvc2RrL2Jvb3RzdHJhcC9zcmMvTWVzc2FnZXMvUmVqZWN0TWVzc2FnZS50cyIsIndlYnBhY2s6Ly8vLi9wYWNrYWdlcy9zZGsvYm9vdHN0cmFwL3NyYy9NZXNzYWdlT2JzZXJ2ZXJzL0Nvbm5lY3RPYnNlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFBvc3RNZXNzYWdlQ2xpZW50SW5mbyB9IGZyb20gJy4vUG9zdE1lc3NhZ2VDbGllbnRJbmZvJztcbmltcG9ydCB0eXBlIHsgSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lciwgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXIsIElPYnNlcnZlciwgSUJyaWRnZU1lc3NhZ2UsIElNZXNzYWdlIH0gZnJvbSAnLi4vTWVzc2VuZ2VyL0lNZXNzZW5nZXInO1xuXG4vKipcbiAqIEJyaWRnZXMgYW5kIGFic3RyYWN0cyBhIHdpbmRvdyBhbmQgaXRzIGFkZEV2ZW50TGlzdGVuZXIgZnVuY3Rpb24gdG8gcmVjZWl2ZSBgbWVzc2FnZWAgZXZlbnRzXG4gKlxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkXG4gKi9cbmV4cG9ydCBjbGFzcyBQb3N0TWVzc2FnZUxpc3RlbmVyPFxuICBJbmNvbWluZ0RhdGFNYXBULFxuPiBpbXBsZW1lbnRzIElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXI8SW5jb21pbmdEYXRhTWFwVD4ge1xuICBwcml2YXRlIG1lc3NhZ2VPYnNlcnZlcjogSU9ic2VydmVyPFtJTWVzc2FnZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiwgUG9zdE1lc3NhZ2VDbGllbnRJbmZvLCBudW1iZXJdPiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9uTWVzc2FnZTogKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0YXJnZXRXaW5kb3c6IFdpbmRvdykge1xuICAgIC8vIHNldCB1cCBhIGNhbGxiYWNrIHRvIHVzZSBpbiBgd2luZG93LmFkZEV2ZW50TGlzdGVuZXJgIHRoYXQgd2lsbCB0cmlnZ2VyIHRoZSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICAgIHRoaXMub25NZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQ8SUJyaWRnZU1lc3NhZ2U8a2V5b2YgSW5jb21pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4+KSA9PiB7XG4gICAgICBpZiAodGhpcy5tZXNzYWdlT2JzZXJ2ZXIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgIHRoaXMubWVzc2FnZU9ic2VydmVyLm5vdGlmeSh7XG4gICAgICAgICAgLy8gVGhpcyBzcHJlYWQgaXMga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWxpdHkgd2l0aCBtZXNzZW5nZXJzIGNvbXBpbGVkIGludG8gb2xkZXIgc2RrIGJvb3RzdHJhcHMuLi4gc3Vja3NcbiAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgaWQ6IG1lc3NhZ2UuZnJvbUlkLFxuICAgICAgICAgIG9yaWdpbjogZXZlbnQub3JpZ2luLFxuICAgICAgICAgIHNvdXJjZTogZXZlbnQuc291cmNlIGFzIFdpbmRvdyxcbiAgICAgICAgfSwgZXZlbnQuZGF0YS50aW1lc3RhbXApO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgcmVjZWl2aW5nIG1lc3NhZ2UgZXZlbnRzIGZyb20gcG9zdE1lc3NhZ2VcbiAgICpcbiAgICogQHBhcmFtIG9ic2VydmVyXG4gICAqL1xuICBwdWJsaWMgbGlzdGVuKG9ic2VydmVyOiBJT2JzZXJ2ZXI8W0lNZXNzYWdlPGtleW9mIEluY29taW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LCBQb3N0TWVzc2FnZUNsaWVudEluZm9dPik6IHZvaWQge1xuICAgIGlmICghdGhpcy5tZXNzYWdlT2JzZXJ2ZXIpIHtcbiAgICAgIHRoaXMubWVzc2FnZU9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLnRhcmdldFdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vbk1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHJlY2VpdmluZyBtZXNzYWdlIGV2ZW50cyBmcm9tIHBvc3RNZXNzYWdlXG4gICAqL1xuICBwdWJsaWMgc3RvcExpc3RlbmluZygpOiB2b2lkIHtcbiAgICB0aGlzLnRhcmdldFdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5vbk1lc3NhZ2UpO1xuICAgIHRoaXMubWVzc2FnZU9ic2VydmVyID0gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEJyaWRnZXMgYW5kIGFic3RyYWN0cyBhIHdpbmRvdyBhbmQgaXRzIHBvc3RNZXNzYWdlIGZ1bmN0aW9uIHRvIHNlbmQgbWVzc2FnZXNcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGNsYXNzIFBvc3RNZXNzYWdlU2VuZGVyPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuPiBpbXBsZW1lbnRzIElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyPE91dGdvaW5nRGF0YU1hcFQsIFdpbmRvdz4ge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGFyZ2V0V2luZG93OiBXaW5kb3csIHByaXZhdGUgdGFyZ2V0T3JpZ2luOiBzdHJpbmcgPSAnKicpIHsgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgbWVzc2FnZSBvdmVyIHBvc3RNZXNzYWdlIHRvIHRoZSBgdGFyZ2V0V2luZG93YFxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKi9cbiAgcHVibGljIHNlbmQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8a2V5b2YgT3V0Z29pbmdEYXRhTWFwVCwgT3V0Z29pbmdEYXRhTWFwVD4sIF9zb3VyY2U6IFdpbmRvdyk6IHZvaWQge1xuICAgIHRoaXMudGFyZ2V0V2luZG93LnBvc3RNZXNzYWdlKG1lc3NhZ2UsIHRoaXMudGFyZ2V0T3JpZ2luKTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBJT2JzZXJ2ZXIsIElCcmlkZ2VNZXNzYWdlIH0gZnJvbSAnLi9JTWVzc2VuZ2VyJztcbmltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7IENsaWVudEluZm8gfSBmcm9tICcuLic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2VSZWNlaXZlcjxJbmNvbWluZ0RhdGFNYXBUPiB7XG4gIG9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgY2xpZW50SW5mbzogQ2xpZW50SW5mbyk6IHZvaWQ7XG59XG5cbi8qKlxuICogQW4gb2JzZXJ2ZXIgdXNlZCBzcGVjaWZpY2FsbHkgZm9yIGJpbmRpbmcgYW4gSU1lc3NlbmdlciB0byBhbiBJTWVzc2VuZ2VyQnJpZGdlXG4gKi9cbmV4cG9ydCBjbGFzcyBCcmlkZ2VPYnNlcnZlcjxJbmNvbWluZ0RhdGFNYXBUPiBpbXBsZW1lbnRzIElPYnNlcnZlcjxbSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBDbGllbnRJbmZvXT4ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc3NhZ2VSZWNlaXZlcjogSU1lc3NhZ2VSZWNlaXZlcjxJbmNvbWluZ0RhdGFNYXBUPikgeyB9XG4gIHB1YmxpYyBub3RpZnkobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKTogdm9pZCB7XG4gICAgdGhpcy5tZXNzYWdlUmVjZWl2ZXIub25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZSwgY2xpZW50SW5mbyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQSBkaWN0aW9uYXJ5IGxpa2Ugb2JqZWN0IG9mIGFycmF5c1xuICovXG5leHBvcnQgY2xhc3MgRGljdEFycmF5PEsgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIsIFY+IHtcbiAgcHJpdmF0ZSB2YWx1ZXM6IFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIFZbXT4gPSB7fTtcblxuICAvKipcbiAgICogQWRkIGFuIGVudHJ5IHRvIHRoZSBhcnJheSBhdCBga2V5YFxuICAgKlxuICAgKiBAcGFyYW0ge0t9IGtleVxuICAgKiBAcGFyYW0ge1Z9IHZhbHVlXG4gICAqL1xuICBwdWJsaWMgYWRkKGtleTogSywgdmFsdWU6IFYpOiB2b2lkIHtcbiAgICBjb25zdCB2YWx1ZXNBdEtleSA9IHRoaXMuZ2V0VmFsdWVzQXRLZXkoa2V5KTtcbiAgICB2YWx1ZXNBdEtleS5wdXNoKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgYXJyYXkgYXQgYGtleWBcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWx1ZVxuICAgKi9cbiAgcHVibGljIHJlbW92ZShrZXk6IEssIHZhbHVlOiBWKTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWVzQXRLZXkgPSB0aGlzLnZhbHVlc1trZXldO1xuICAgIGlmICh2YWx1ZXNBdEtleSkge1xuICAgICAgY29uc3QgaWR4ID0gdmFsdWVzQXRLZXkuaW5kZXhPZih2YWx1ZSk7XG4gICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgdmFsdWVzQXRLZXkuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCBga2V5YFxuICAgKiBAcGFyYW0ge0t9IGtleVxuICAgKi9cbiAgcHVibGljIHJlbW92ZUtleShrZXk6IEspOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy52YWx1ZXNba2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFycmF5IG9mIHZhbHVlcyBhdCBga2V5YFxuICAgKiBXaWxsIGFsd2F5cyByZXR1cm4gYXQgbGVhc3QgYW4gZW1wdHkgYXJyYXlcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICovXG4gIHB1YmxpYyBnZXRWYWx1ZXNBdEtleShrZXk6IEspOiBWW10ge1xuICAgIGNvbnN0IHZhbHVlc0F0S2V5ID0gdGhpcy52YWx1ZXNba2V5XSB8fCBbXTtcbiAgICB0aGlzLnZhbHVlc1trZXldID0gdmFsdWVzQXRLZXk7XG4gICAgcmV0dXJuIHZhbHVlc0F0S2V5IGFzIFZbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvdW50IG9mIHZhbHVlcyBhdCBga2V5YFxuICAgKlxuICAgKiBAcGFyYW0ge0t9IGtleVxuICAgKi9cbiAgcHVibGljIHZhbHVlc1BlcktleShrZXk6IEspOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmdldFZhbHVlc0F0S2V5KGtleSkubGVuZ3RoO1xuICB9XG5cbiAgcHVibGljIGZpbmQoa2V5OiBLLCB2YWxGaW5kZXI6ICh2YWw6IFYpID0+IGJvb2xlYW4pOiBWIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZXNba2V5XSAmJiB0aGlzLnZhbHVlc1trZXldLmZpbmQodmFsRmluZGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaXRlcmF0b3Igb3ZlciB0aGUga2V5cyBpbiB0aGlzIGBEaWN0QXJyYXlgXG4gICAqL1xuICBwdWJsaWMgZ2V0IGtleXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcyk7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBga2V5YCBpcyBpbiB0aGlzIGBEaWN0QXJyYXlgXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqL1xuICBwdWJsaWMgaGFzS2V5KGtleTogSyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBrZXkgaW4gdGhpcy52YWx1ZXM7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBhIGtleS12YWx1ZSBwYWlyIGlzIGluIHRoaXMgYERpY3RBcnJheWBcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWxcbiAgICovXG4gIHB1YmxpYyBoYXMoa2V5OiBLLCB2YWw6IFYpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5oYXNLZXkoa2V5KSAmJiB0aGlzLnZhbHVlc1trZXldLmluY2x1ZGVzKHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIGFsbCB2YWx1ZXMgaW4gdGhpcyBgRGljdEFycmF5YFxuICAgKi9cbiAgcHVibGljICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFtzdHJpbmcsIFZdPiB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy52YWx1ZXMpIHtcbiAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMudmFsdWVzW2tleV0pIHtcbiAgICAgICAgeWllbGQgW2tleSwgdmFsXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQSBkaWN0aW9uYXJ5IGxpa2Ugb2JqZWN0IG9mIGFycmF5c1xuICovXG5leHBvcnQgY2xhc3MgTWFwU2V0PEssIFY+IHtcbiAgcHJpdmF0ZSB2YWx1ZXMgPSBuZXcgTWFwPEssIFNldDxWPj4oKTtcblxuICAvKipcbiAgICogQWRkIGFuIGVudHJ5IHRvIHRoZSBzZXQgYXQgYGtleWBcbiAgICogKipOT1RFKio6IHRyeWluZyB0byBhZGQgdGhlIHNhbWUgb2JqZWN0IHR3aWNlIHdpbGwgbm90IGFkZCB0d28gaW5zdGFuY2VzLiBJZiB0d28gY29waWVzIGlzIHJlcXVpcmVkLCBtYWtlIGEgY2xvbmUgZmlyc3RcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWx1ZVxuICAgKi9cbiAgcHVibGljIGFkZChrZXk6IEssIHZhbHVlOiBWKTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWVzQXRLZXkgPSB0aGlzLmdldFZhbHVlc0F0S2V5KGtleSk7XG4gICAgdmFsdWVzQXRLZXkuYWRkKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgYXJyYXkgYXQgYGtleWBcbiAgICpcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWx1ZVxuICAgKi9cbiAgcHVibGljIHJlbW92ZShrZXk6IEssIHZhbHVlOiBWKTogdm9pZCB7XG4gICAgY29uc3QgdmFsdWVzQXRLZXkgPSB0aGlzLnZhbHVlcy5nZXQoa2V5KTtcbiAgICB2YWx1ZXNBdEtleT8uZGVsZXRlKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggYGtleWBcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICovXG4gIHB1YmxpYyByZW1vdmVLZXkoa2V5OiBLKTogdm9pZCB7XG4gICAgdGhpcy52YWx1ZXMuZGVsZXRlKGtleSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhcnJheSBvZiB2YWx1ZXMgYXQgYGtleWBcbiAgICogV2lsbCBhbHdheXMgcmV0dXJuIGF0IGxlYXN0IGFuIGVtcHR5IGFycmF5XG4gICAqXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqL1xuICBwdWJsaWMgZ2V0VmFsdWVzQXRLZXkoa2V5OiBLKTogU2V0PFY+IHtcbiAgICBjb25zdCB2YWx1ZXNBdEtleSA9IHRoaXMudmFsdWVzLmdldChrZXkpIHx8IG5ldyBTZXQ8Vj4oKTtcbiAgICB0aGlzLnZhbHVlcy5zZXQoa2V5LCB2YWx1ZXNBdEtleSk7XG4gICAgcmV0dXJuIHZhbHVlc0F0S2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY291bnQgb2YgdmFsdWVzIGF0IGBrZXlgXG4gICAqXG4gICAqIEBwYXJhbSB7S30ga2V5XG4gICAqL1xuICBwdWJsaWMgdmFsdWVzUGVyS2V5KGtleTogSyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVzQXRLZXkoa2V5KS5zaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpdGVyYXRvciBvdmVyIHRoZSBrZXlzIGluIHRoaXMgYE1hcFNldGBcbiAgICovXG4gIHB1YmxpYyBnZXQga2V5cygpOiBJdGVyYWJsZUl0ZXJhdG9yPEs+IHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZXMua2V5cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYGtleWAgaXMgaW4gdGhpcyBgTWFwU2V0YFxuICAgKiBAcGFyYW0ge0t9IGtleVxuICAgKi9cbiAgcHVibGljIGhhc0tleShrZXk6IEspOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZXMuaGFzKGtleSk7XG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBhIGtleS12YWx1ZSBwYWlyIGlzIGluIHRoaXMgYE1hcFNldGBcbiAgICogQHBhcmFtIHtLfSBrZXlcbiAgICogQHBhcmFtIHtWfSB2YWxcbiAgICovXG4gIHB1YmxpYyBoYXMoa2V5OiBLLCB2YWw6IFYpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnZhbHVlcy5nZXQoa2V5KT8uaGFzKHZhbCk7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIGFsbCB2YWx1ZXMgaW4gdGhpcyBgTWFwU2V0YFxuICAgKi9cbiAgcHVibGljICpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFtLLCBWXT4ge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsc10gb2YgdGhpcy52YWx1ZXMpIHtcbiAgICAgIGZvciAoY29uc3QgdmFsIG9mIHZhbHMpIHtcbiAgICAgICAgeWllbGQgW2tleSwgdmFsXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHtcbiAgSVVuZGlyZWN0ZWRNZXNzZW5nZXIsIElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXIsIElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyLFxuICBJTWVzc2FnZSwgSU1lc3NhZ2VPYnNlcnZlciwgSUJyaWRnZU1lc3NhZ2UsXG4gIENsaWVudEluZm8sXG59IGZyb20gJy4vSU1lc3Nlbmdlcic7XG5pbXBvcnQgeyBCcmlkZ2VPYnNlcnZlciB9IGZyb20gJy4vQnJpZGdlT2JzZXJ2ZXInO1xuaW1wb3J0IHsgRGljdEFycmF5IH0gZnJvbSAnQG1wL3V0aWwtZGljdGFycmF5JztcbmltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8qKlxuICogQSBiaS1kaXJlY3Rpb25hbCBjb21tdW5pY2F0b3IgdGhhdCBjYW5cbiAqIC0gb3Blbmx5IHJlY2VpdmUgbWVzc2FnZXMgb2YgdHlwZSBga2V5b2YgSW5jb21pbmdEYXRhTWFwVGAgdmlhIG9ic2VydmVycyBmcm9tIHVuc3BlY2lmaWVkIHNvdXJjZXNcbiAqIC0gc2VuZCBtZXNzYWdlcyBvZiB0eXBlIGBrZXlvZiBPdXRnb2luZ0RhdGFNYXBUYCB0byB0YXJnZXRzIHNwZWNpZmllZCB3aGVuIHNlbmRpbmdcbiAqXG4gKiAqKkRpZmZlcnMgZnJvbSBhIHN0YW5kYXJkIGBJTWVzc2VuZ2VyYCBpbiB0aGF0IGl0IGRvZXNuJ3Qga25vdyBpdCdzIGNvbW11bmljYXRpb24gdGFyZ2V0IGF0IGNvbnN0cnVjdGlvbiB0aW1lKipcbiAqXG4gKiBUaGUgdW5kZXJseWluZyBjb21tdW5pY2F0aW9uIG1lY2hhbmlzbXMgYXJlIGRlZmluZWQgYnkgYW4gYElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXJgIHByb3ZpZGVkIGluIHRoZSBjb25zdHJ1Y3RvclxuICogYW5kIGJ5IHRoZSBgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXJgIHByb3ZpZGVkIGluIHNlbmRcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZCBieSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICovXG5leHBvcnQgY2xhc3MgVW5kaXJlY3RlZE1lc3NlbmdlcjxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbiAgU291cmNlVCxcbj4gaW1wbGVtZW50cyBJVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBULCBTb3VyY2VUPiB7XG5cbiAgcHJpdmF0ZSBvYnNlcnZlcnM6IERpY3RBcnJheTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4+ID0gbmV3IERpY3RBcnJheSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc291cmNlSWQ6IG51bWJlciwgcHJpdmF0ZSBsaXN0ZW5lckJyaWRnZTogSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lcjxJbmNvbWluZ0RhdGFNYXBUPikgeyB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IGxpc3RlbmluZyBmb3IgYW55IGluY29taW5nIG1lc3NhZ2VzIHZpYSB0aGUgYGxpc3RlbmVyQnJpZGdlYFxuICAgKi9cbiAgcHVibGljIGluaXQoKTogdm9pZCB7XG4gICAgY2xhc3MgVW5kaXJlY3RlZEZhY2FkZSB7XG4gICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG1lc3NlbmdlcjogVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBULCBTb3VyY2VUPikge31cbiAgICAgIHB1YmxpYyBvbk1lc3NhZ2VSZWNlaXZlZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4sIGNsaWVudEluZm86IENsaWVudEluZm8pIHtcbiAgICAgICAgdGhpcy5tZXNzZW5nZXIub25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZSwgY2xpZW50SW5mbyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2VuZ2VyRmFjYWRlID0gbmV3IFVuZGlyZWN0ZWRGYWNhZGUodGhpcyk7XG4gICAgY29uc3QgYnJpZGdlT2JzZXJ2ZXIgPSBuZXcgQnJpZGdlT2JzZXJ2ZXIobWVzc2VuZ2VyRmFjYWRlKTtcbiAgICB0aGlzLmxpc3RlbmVyQnJpZGdlLmxpc3RlbihicmlkZ2VPYnNlcnZlcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIG1lc3NhZ2VzIGFuZCBjbGVhbiB1cCB0aGlzIFVuZGlyZWN0ZWRNZXNzZW5nZXJcbiAgICovXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXJCcmlkZ2Uuc3RvcExpc3RlbmluZygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9ic2VydmUgaW5jb21pbmcgbWVzc2FnZXNcbiAgICpcbiAgICogQHBhcmFtIG9ic2VydmVyXG4gICAqL1xuICBwdWJsaWMgYWRkT2JzZXJ2ZXIob2JzZXJ2ZXI6IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vYnNlcnZlcnMuYWRkKG9ic2VydmVyLm1lc3NhZ2VUeXBlLCBvYnNlcnZlcik7XG4gIH1cblxuICAvKipcbiAgICogU3RvcCBhbiBvYnNlcnZlciBmcm9tIHJlY2VpdmluZyBtZXNzYWdlc1xuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXJcbiAgICovXG4gIHB1YmxpYyByZW1vdmVPYnNlcnZlcihvYnNlcnZlcjogSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiB2b2lkIHtcbiAgICB0aGlzLm9ic2VydmVycy5yZW1vdmUob2JzZXJ2ZXIubWVzc2FnZVR5cGUsIG9ic2VydmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgYG1lc3NhZ2VgIHRvIHRoZSBgdGFyZ2V0YFxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKiBAcGFyYW0gdGFyZ2V0SWRcbiAgICogQHBhcmFtIHRhcmdldFxuICAgKi9cbiAgcHVibGljIHNlbmQoXG4gICAgbWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+LFxuICAgIHRhcmdldElkOiBudW1iZXIsXG4gICAgdGFyZ2V0OiBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcjxPdXRnb2luZ0RhdGFNYXBULCB1bmtub3duPixcbiAgICBzb3VyY2U6IFNvdXJjZVQsXG4gICk6IHZvaWQge1xuICAgIHRhcmdldC5zZW5kKHtcbiAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICBmcm9tSWQ6IHRoaXMuc291cmNlSWQsXG4gICAgICB0b0lkOiB0YXJnZXRJZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGlmeSBhbGwgb2JzZXJ2ZXJzIG9mIGBtZXNzYWdlLnR5cGVgIG9mIHRoZSBpbmNvbWluZyBgbWVzc2FnZWBcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICovXG4gIHByaXZhdGUgb25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKTogdm9pZCB7XG4gICAgY29uc3QgbWVzc2FnZVR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc3QgbWVzc2FnZU9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmdldFZhbHVlc0F0S2V5KG1lc3NhZ2VUeXBlKTtcbiAgICBpZiAobWVzc2FnZU9ic2VydmVycykge1xuICAgICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiBtZXNzYWdlT2JzZXJ2ZXJzKSB7XG4gICAgICAgIC8vIFRPRE8gKHNkayAxLnggc3VwcG9ydCk6IFNESyBCb29zdHJhcCAxLnggcHV0IHRoZSBwYXlsb2FkIGF0IHRoZSByb290IG9mIHRoZSBtZXNzYWdlXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBtZXNzYWdlLnBheWxvYWQgfHwgbWVzc2FnZSBhcyB1bmtub3duIGFzIEluY29taW5nRGF0YU1hcFRbRXhjbHVkZTxrZXlvZiBJbmNvbWluZ0RhdGFNYXBULCBzeW1ib2w+XTtcbiAgICAgICAgb2JzZXJ2ZXIubm90aWZ5KHBheWxvYWQsIGNsaWVudEluZm8sIG1lc3NhZ2UudGltZXN0YW1wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgSU1lc3NlbmdlckJyaWRnZSB9IGZyb20gJy4uL01lc3Nlbmdlci9JTWVzc2VuZ2VyJztcblxuLyoqXG4gKiBBY3RzIGFzIGEgTWVzc2VuZ2VyQnJpZGdlIGJ1dCB0aHJvd3MgZXJyb3JzIG9uIGFsbCBvdXRnb2luZyBjYWxscyBhbmQgbm8tb3BzIGFueSBpbmNvbWluZyBtZXNzYWdlc1xuICovXG5leHBvcnQgY2xhc3MgRXJyb3JNZXNzYWdlQnJpZGdlIGltcGxlbWVudHMgSU1lc3NlbmdlckJyaWRnZTx1bmtub3duLCB1bmtub3duPiB7XG4gIC8qKlxuICAgKiBOby1vcCBsaXN0ZW5lclxuICAgKi9cbiAgcHVibGljIGxpc3RlbigpOiB2b2lkIHt9XG5cbiAgLyoqXG4gICAqIE5vLW9wIHN0b3AgcmVjZWl2aW5nIG1lc3NhZ2VcbiAgICovXG4gIHB1YmxpYyBzdG9wTGlzdGVuaW5nKCk6IHZvaWQge31cblxuICAvKipcbiAgICogVGhyb3cgZXJyb3JzIHdoZW4gYXR0ZW1wdGluZyB0byBzZW5kIG1lc3NhZ2VzXG4gICAqL1xuICBwdWJsaWMgc2VuZCgpOiBuZXZlciB7XG4gICAgdGhyb3cgRXJyb3IoJ1RoZSBzZGsgaGFzIGJlZW4gZGlzY29ubmVjdGVkIGFuZCBjYW5cXCd0IG1ha2UgYW55IG5ldyBjYWxscycpO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7XG4gIElNZXNzZW5nZXIsIElNZXNzZW5nZXJCcmlkZ2UsXG4gIElNZXNzYWdlLCBJTWVzc2FnZU9ic2VydmVyLCBJQnJpZGdlTWVzc2FnZSxcbiAgQ2xpZW50SW5mbyxcbn0gZnJvbSAnLi9JTWVzc2VuZ2VyJztcbmltcG9ydCB7IEJyaWRnZU9ic2VydmVyIH0gZnJvbSAnLi9CcmlkZ2VPYnNlcnZlcic7XG5pbXBvcnQgeyBEaWN0QXJyYXkgfSBmcm9tICdAbXAvdXRpbC1kaWN0YXJyYXknO1xuaW1wb3J0IHR5cGUgeyBJbmRleEtleSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEVycm9yTWVzc2FnZUJyaWRnZSB9IGZyb20gJy4uL2Vycm9ybWVzc2FnZS9FcnJvck1lc3NhZ2VCcmlkZ2UnO1xuXG4vKipcbiAqIEEgYmktZGlyZWN0aW9uYWwgY29tbXVuaWNhdG9yIHRoYXQgY2FuXG4gKiAtIHJlY2VpdmUgbWVzc2FnZSBvZiB0eXBlIGBrZXlvZiBJbmNvbWluZ0RhdGFNYXBUYCB2aWEgb2JzZXJ2ZXJzXG4gKiAtIHNlbmQgbWVzc2FnZXMgb2YgdHlwZSBga2V5b2YgT3V0Z29pbmdEYXRhTWFwVGBcbiAqIC0gZmlsdGVycyBpbmNvbWluZyBtZXNzYWdlcyBiYXNlZCBvbiB0aGUgaWQgb2YgdGhlIGNsaWVudCBhbmQgdGhlIG1lc3NhZ2UncyB0YXJnZXRcbiAqXG4gKiBUaGUgdW5kZXJseWluZyBjb21tdW5pY2F0aW9uIG1lY2hhbmlzbXMgYXJlIGRlZmluZWQgYnkgYW4gSU1lc3NlbmdlckJyaWRnZSBwcm92aWRlZCBieSB0aGUgY3JlYXRvclxuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzZW5nZXI8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4gIEluY29taW5nRGF0YU1hcFQsXG4+IGltcGxlbWVudHMgSU1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiB7XG5cbiAgcHJpdmF0ZSBvYnNlcnZlcnM6IERpY3RBcnJheTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4+ID0gbmV3IERpY3RBcnJheSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc291cmNlSWQ6IG51bWJlciwgcHJpdmF0ZSB0YXJnZXRJZDogbnVtYmVyLCBwcml2YXRlIG1lc3NhZ2VCcmlkZ2U6IElNZXNzZW5nZXJCcmlkZ2U8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4pIHsgfVxuXG4gIC8qKlxuICAgKiBDbG9uZSB0aGlzIE1lc3NlbmdlciBhcyBhbiBJTWVzc2VuZ2VyIHRoYXQgd2lsbCBvbmx5IHNlbmQgYW5kIHJlY2VpdmUgY2VydGFpbiB0eXBlcyBvZiBtZXNzYWdlc1xuICAgKiBAcGFyYW0gbWVzc2VuZ2VyXG4gICAqIEBwYXJhbSBzZW5kRmlsdGVyXG4gICAqIEBwYXJhbSByZWN2RmlsdGVyXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRvRmlsdGVyZWRNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4oXG4gICAgbWVzc2VuZ2VyOiBNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4sXG4gICAgc2VuZEZpbHRlcjogQXJyYXk8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4+LFxuICAgIHJlY3ZGaWx0ZXI6IEFycmF5PEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+PixcbiAgKTogSU1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiB7XG4gICAgY29uc3QgZmlsdGVyZWRNZXNzZW5nZXIgPSBuZXcgRmlsdGVyZWRNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4obWVzc2VuZ2VyLnNvdXJjZUlkLCBtZXNzZW5nZXIudGFyZ2V0SWQsIG1lc3Nlbmdlciwgc2VuZEZpbHRlcik7XG4gICAgZm9yIChjb25zdCBtc2dUeXBlIG9mIHJlY3ZGaWx0ZXIpIHtcbiAgICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgbWVzc2VuZ2VyLm9ic2VydmVycy5nZXRWYWx1ZXNBdEtleShtc2dUeXBlKSkge1xuICAgICAgICBmaWx0ZXJlZE1lc3Nlbmdlci5hZGRPYnNlcnZlcihvYnNlcnZlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbHRlcmVkTWVzc2VuZ2VyO1xuICB9XG4gIC8qKlxuICAgKiBTdGFydCBsaXN0ZW5pbmcgZm9yIGFueSBpbmNvbWluZyBtZXNzYWdlcyB2aWEgdGhlIGBtZXNzYWdlQnJpZGdlYFxuICAgKi9cbiAgcHVibGljIGluaXQoKTogdm9pZCB7XG4gICAgY2xhc3MgTWVzc2VuZ2VyRmFjYWRlIHtcbiAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgbWVzc2VuZ2VyOiBNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4pIHt9XG4gICAgICBwdWJsaWMgb25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKSB7XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyLm9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2UsIGNsaWVudEluZm8pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG1lc3NlbmdlckZhY2FkZSA9IG5ldyBNZXNzZW5nZXJGYWNhZGUodGhpcyk7XG4gICAgY29uc3QgYnJpZGdlT2JzZXJ2ZXIgPSBuZXcgQnJpZGdlT2JzZXJ2ZXIobWVzc2VuZ2VyRmFjYWRlKTtcbiAgICB0aGlzLm1lc3NhZ2VCcmlkZ2UubGlzdGVuKGJyaWRnZU9ic2VydmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGxpc3RlbmluZyBmb3IgbWVzc2FnZXMgYW5kIGNsZWFuIHVwIHRoaXMgTWVzc2VuZ2VyXG4gICAqL1xuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLm1lc3NhZ2VCcmlkZ2Uuc3RvcExpc3RlbmluZygpO1xuICAgIHRoaXMubWVzc2FnZUJyaWRnZSA9IG5ldyBFcnJvck1lc3NhZ2VCcmlkZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPYnNlcnZlIGluY29taW5nIG1lc3NhZ2VzXG4gICAqXG4gICAqIEBwYXJhbSBvYnNlcnZlclxuICAgKi9cbiAgcHVibGljIGFkZE9ic2VydmVyKG86IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgdGhpcy5vYnNlcnZlcnMuYWRkKG8ubWVzc2FnZVR5cGUsIG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgYW4gb2JzZXJ2ZXIgZnJvbSByZWNlaXZpbmcgbWVzc2FnZXNcbiAgICpcbiAgICogQHBhcmFtIG9ic2VydmVyXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlT2JzZXJ2ZXIobzogSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiB2b2lkIHtcbiAgICB0aGlzLm9ic2VydmVycy5yZW1vdmUoby5tZXNzYWdlVHlwZSwgbyk7XG4gIH1cblxuICAvKipcbiAgICogU2VuZCBhIGBtZXNzYWdlYCB0byB0aGUgYHRhcmdldGAgb2YgdGhlIGBJTWVzc2VuZ2VyQnJpZGdlYFxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKi9cbiAgcHVibGljIHNlbmQobWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgY29uc3QgZnJvbUlkID0gdGhpcy5zb3VyY2VJZDtcbiAgICBjb25zdCB0b0lkID0gdGhpcy50YXJnZXRJZDtcbiAgICB0aGlzLm1lc3NhZ2VCcmlkZ2Uuc2VuZCh7XG4gICAgICAuLi5tZXNzYWdlLFxuICAgICAgZnJvbUlkLFxuICAgICAgdG9JZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgYWxsIG9ic2VydmVycyBvZiBgbWVzc2FnZS50eXBlYCBvZiB0aGUgaW5jb21pbmcgYG1lc3NhZ2VgIGFmdGVyIGFueSBmaWx0ZXJpbmcgb3V0IG1lc3NhZ2VzIG5vdCBtZWFudCBmb3IgdGhpcyBNZXNzZW5nZXJcbiAgICpcbiAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICovXG4gIHByaXZhdGUgb25NZXNzYWdlUmVjZWl2ZWQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+LCBjbGllbnRJbmZvOiBDbGllbnRJbmZvKSB7XG4gICAgaWYgKCF0aGlzLmZpbHRlck1lc3NhZ2VJZChtZXNzYWdlKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbWVzc2FnZVR5cGUgPSBtZXNzYWdlLnR5cGU7XG4gICAgY29uc3QgbWVzc2FnZU9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzLmdldFZhbHVlc0F0S2V5KG1lc3NhZ2VUeXBlKTtcbiAgICBpZiAobWVzc2FnZU9ic2VydmVycykge1xuICAgICAgZm9yIChjb25zdCBvYnNlcnZlciBvZiBtZXNzYWdlT2JzZXJ2ZXJzKSB7XG4gICAgICAgIC8vIFRPRE8gKHNkayAxLnggc3VwcG9ydCk6IFNESyBib290c3RyYXAgMS54IHB1dCB0aGUgcGF5bG9hZCBhdCB0aGUgcm9vdCBvZiB0aGUgbWVzc2FnZSwgbm90IHVuZGVyIHRoZSBgcGF5bG9hZGAgcHJvcGVydHlcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IG1lc3NhZ2UucGF5bG9hZCB8fCBtZXNzYWdlIGFzIHVua25vd24gYXMgSW5jb21pbmdEYXRhTWFwVFtFeGNsdWRlPGtleW9mIEluY29taW5nRGF0YU1hcFQsIHN5bWJvbD5dO1xuICAgICAgICBvYnNlcnZlci5ub3RpZnkocGF5bG9hZCwgY2xpZW50SW5mbywgbWVzc2FnZS50aW1lc3RhbXApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgd2hldGhlciBgbWVzc2FnZWAgaXMgbWVhbnQgZm9yIHRoaXMgTWVzc2VuZ2VyIGFuZCBjb21lcyBmcm9tIGEga25vd24gdGFyZ2V0XG4gICAqIEBwYXJhbSBtZXNzYWdlXG4gICAqL1xuICBwcml2YXRlIGZpbHRlck1lc3NhZ2VJZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiBib29sZWFuIHtcbiAgICBjb25zdCB0b0lkID0gbWVzc2FnZS50b0lkO1xuICAgIGNvbnN0IGZyb21JZCA9IG1lc3NhZ2UuZnJvbUlkO1xuICAgIGlmICh0b0lkIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIHJldHVybiB0b0lkLmluZGV4T2YodGhpcy5zb3VyY2VJZCkgPiAtMTtcbiAgICB9XG5cbiAgICAvLyBUT0RPIChzZGsgMS54IHN1cHBvcnQpOiBTREsgYm9vdHN0cmFwIDEueCBoYWQgYHRvSWRgIGFzIHVuZGVmaW5lZCBmb3IgbWVzc2FnZXNcbiAgICByZXR1cm4gKHRvSWQgPT09IHVuZGVmaW5lZCB8fCB0b0lkID09PSB0aGlzLnNvdXJjZUlkKSAmJiBmcm9tSWQgPT09IHRoaXMudGFyZ2V0SWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBBIGRlY29yYXRlZCBJTWVzc2VuZ2VyIHRoYXQgb25seSBzZW5kcyBtZXNzYWdlcyBmcm9tIGEgcHJlZGVmaW5lZCBzZXQgb2YgbWVzc2FnZSB0eXBlcyBhbmQgZXJyb3JzIG9uIG90aGVycy5cbiAqL1xuY2xhc3MgRmlsdGVyZWRNZXNzZW5nZXI8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4gIEluY29taW5nRGF0YU1hcFRcbj4gZXh0ZW5kcyBNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4ge1xuICBwcml2YXRlIGVycm9yQnJpZGdlOiBFcnJvck1lc3NhZ2VCcmlkZ2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc291cmNlSWQ6IG51bWJlcixcbiAgICB0YXJnZXRJZDogbnVtYmVyLFxuICAgIHByaXZhdGUgbWVzc2VuZ2VyOiBJTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+LFxuICAgIHByaXZhdGUgc2VuZEZpbHRlcjogQXJyYXk8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4+LFxuICApIHtcbiAgICAvLyBUT0RPIChAbXAvc2RrKTogc29tZXRoaW5nIGFib3V0IHRoZSB0c2NvbmZpZyBpbiBAbXAvc2RrIHJlcXVpcmVzIGBzdXBlcmAgdG8gYmUgY2FsbGVkIGZpcnN0IHNvIHRoZSBgbmV3IEVycm9yTWVzc2FnZUJyaWRnZWAgY2FuJ3QgYmUgc2hhcmVkXG4gICAgc3VwZXIoc291cmNlSWQsIHRhcmdldElkLCBuZXcgRXJyb3JNZXNzYWdlQnJpZGdlKCkpO1xuICAgIHRoaXMuZXJyb3JCcmlkZ2UgPSBuZXcgRXJyb3JNZXNzYWdlQnJpZGdlKCk7XG4gIH1cblxuICBwdWJsaWMgc2VuZChtZXNzYWdlOiBJTWVzc2FnZTxJbmRleEtleTxPdXRnb2luZ0RhdGFNYXBUPiwgT3V0Z29pbmdEYXRhTWFwVD4pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zZW5kRmlsdGVyLmluY2x1ZGVzKG1lc3NhZ2UudHlwZSkpIHtcbiAgICAgIHRoaXMubWVzc2VuZ2VyLnNlbmQobWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXJyb3JCcmlkZ2Uuc2VuZCgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBJTWVzc2VuZ2VyQnJpZGdlLCBJTWVzc2FnZSwgSU9ic2VydmVyLCBJQnJpZGdlTWVzc2FnZSwgSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lciwgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXIgfSBmcm9tICcuLi9NZXNzZW5nZXIvSU1lc3Nlbmdlcic7XG5pbXBvcnQgeyBQb3N0TWVzc2FnZUxpc3RlbmVyLCBQb3N0TWVzc2FnZVNlbmRlciB9IGZyb20gJy4vVW5kaXJlY3RlZFBvc3RNZXNzYWdlQnJpZGdlJztcbmltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8qKlxuICogQnJpZGdlcyBhbmQgc2V0cyB1cCBhIGRpcmVjdCBjaGFubmVsIGJldHdlZW4gdHdvIFdpbmRvd3MgdXNpbmcgcG9zdE1lc3NhZ2VcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICovXG5leHBvcnQgY2xhc3MgUG9zdE1lc3NhZ2VCcmlkZ2U8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4gIEluY29taW5nRGF0YU1hcFQsXG4+IGltcGxlbWVudHMgSU1lc3NlbmdlckJyaWRnZTxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiB7XG4gIHByaXZhdGUgbGlzdGVuZXI6IElVbmRpcmVjdGVkTWVzc2VuZ2VyTGlzdGVuZXI8SW5jb21pbmdEYXRhTWFwVD47XG4gIHByaXZhdGUgc2VuZGVyOiBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcjxPdXRnb2luZ0RhdGFNYXBULCBXaW5kb3c+O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc291cmNlV2luZG93OiBXaW5kb3csIHRhcmdldFdpbmRvdzogV2luZG93LCB0YXJnZXRPcmlnaW46IHN0cmluZyA9ICcqJykge1xuICAgIHRoaXMubGlzdGVuZXIgPSBuZXcgUG9zdE1lc3NhZ2VMaXN0ZW5lcihzb3VyY2VXaW5kb3cpO1xuICAgIHRoaXMuc2VuZGVyID0gbmV3IFBvc3RNZXNzYWdlU2VuZGVyKHRhcmdldFdpbmRvdywgdGFyZ2V0T3JpZ2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCByZWNlaXZpbmcgbWVzc2FnZSBldmVudHMgZnJvbSBwb3N0TWVzc2FnZVxuICAgKlxuICAgKiBAcGFyYW0gb2JzZXJ2ZXJcbiAgICovXG4gIHB1YmxpYyBsaXN0ZW4ob2JzZXJ2ZXI6IElPYnNlcnZlcjxbSU1lc3NhZ2U8a2V5b2YgSW5jb21pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD5dPik6IHZvaWQge1xuICAgIHRoaXMubGlzdGVuZXIubGlzdGVuKG9ic2VydmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHJlY2VpdmluZyBtZXNzYWdlIGV2ZW50cyBmcm9tIHBvc3RNZXNzYWdlXG4gICAqL1xuICBwdWJsaWMgc3RvcExpc3RlbmluZygpOiB2b2lkIHtcbiAgICB0aGlzLmxpc3RlbmVyLnN0b3BMaXN0ZW5pbmcoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGEgbWVzc2FnZSBvdmVyIHBvc3RNZXNzYWdlIHRvIHRoZSBgdGFyZ2V0V2luZG93YFxuICAgKlxuICAgKiBAcGFyYW0gbWVzc2FnZVxuICAgKi9cbiAgcHVibGljIHNlbmQobWVzc2FnZTogSUJyaWRnZU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+KTogdm9pZCB7XG4gICAgdGhpcy5zZW5kZXIuc2VuZChtZXNzYWdlLCB0aGlzLnNvdXJjZVdpbmRvdyk7XG4gIH1cbn1cbiIsImltcG9ydCB7IE1lc3NlbmdlciB9IGZyb20gJy4uL01lc3Nlbmdlci9NZXNzZW5nZXInO1xuaW1wb3J0IHR5cGUgeyBJTWVzc2VuZ2VyRmFjdG9yeSwgSU1lc3NlbmdlciB9IGZyb20gJy4uL01lc3Nlbmdlci9JTWVzc2VuZ2VyJztcbmltcG9ydCB7IFBvc3RNZXNzYWdlQnJpZGdlIH0gZnJvbSAnLi9Qb3N0TWVzc2FnZUJyaWRnZSc7XG5cbi8qKlxuICogQSBzaW1wbGUgZmFjdG9yeSB0byBjcmVhdGUgUG9zdE1lc3NhZ2UgdG8gaGlkZSBhd2F5IHRoZSBkZXRhaWxzIG9mIGlkcyBhbmQgc291cmNlL2FyZ2V0IFdpbmRvdyBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgY2xhc3MgUG9zdE1lc3NhZ2VGYWN0b3J5PE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+IGltcGxlbWVudHMgSU1lc3NlbmdlckZhY3Rvcnk8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4gIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBzb3VyY2VJZDogbnVtYmVyLCBwcml2YXRlIHNvdXJjZVdpbmRvdzogV2luZG93LFxuICAgIHByaXZhdGUgdGFyZ2V0SWQ6IG51bWJlciwgcHJpdmF0ZSB0YXJnZXRXaW5kb3c6IFdpbmRvdywgcHJpdmF0ZSB0YXJnZXRPcmlnaW46IHN0cmluZyA9ICcqJykgeyB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFBvc3RNZXNzYWdlIGNoYW5uZWxcbiAgICogQHBhcmFtIE91dGdvaW5nRGF0YU1hcFQgVGhlIG91dGdvaW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHRoZSBuZXdseSBjcmVhdGVkIElNZXNzZW5nZXJcbiAgICogQHBhcmFtIE91dGdvaW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHRoZSBuZXdseSBjcmVhdGVkIElNZXNzZW5nZXJcbiAgICovXG4gIHB1YmxpYyBjcmVhdGVNZXNzZW5nZXIoKTogSU1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPiB7XG4gICAgY29uc3QgcG9zdE1lc3NhZ2VCcmlkZ2UgPSBuZXcgUG9zdE1lc3NhZ2VCcmlkZ2U8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4odGhpcy5zb3VyY2VXaW5kb3csIHRoaXMudGFyZ2V0V2luZG93LCB0aGlzLnRhcmdldE9yaWdpbik7XG4gICAgY29uc3QgbWVzc2VuZ2VyID0gbmV3IE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPih0aGlzLnNvdXJjZUlkLCB0aGlzLnRhcmdldElkLCBwb3N0TWVzc2FnZUJyaWRnZSk7XG4gICAgcmV0dXJuIG1lc3NlbmdlcjtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBDb25uZWN0UmVzcG9uc2UgfSBmcm9tICcuL0Nvbm5lY3Rvcic7XG5pbXBvcnQgdHlwZSB7IElNZXNzZW5nZXJGYWN0b3J5IH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcblxuaW1wb3J0IHR5cGUgeyBNcFNkayB9IGZyb20gJ0BzZGsvdHlwZXMnO1xuaW1wb3J0IHsgRHluYW1pY0xpYkxvYWRlciB9IGZyb20gJ2R5bmFtaWMtbGliLWxvYWRlcic7XG5cbnR5cGUgRGljdDxUID0gdW5rbm93bj4gPSBSZWNvcmQ8c3RyaW5nLCBUIHwgdW5kZWZpbmVkPjtcblxuLy8gZGVjbGFyZSBjbGFzcyBpcyBsaWtlIGRlZmluaW5nIGFuIGludGVyZmFjZSwgYnV0IGl0IGNhbiBoYXZlIGEgY29uc3RydWN0b3Jcbi8vIGl0J3Mgc2ltaWxhciB0byBgZXh0ZXJuYCwgd2hlcmUgdGhpcyBjbGFzcyBpcyBmdWxseSBkZWZpbmVkIGFuZCBpbXBsZW1lbnRlZCBlbHNld2hlcmVcbmRlY2xhcmUgY2xhc3MgU2RrQnVpbGRlcjxPdXRnb2luZ0RhdGFNYXBUID0gdW5rbm93biwgSW5jb21pbmdEYXRhTWFwVCA9IHVua25vd24+IHtcbiAgY29uc3RydWN0b3IobWVzc2VuZ2VyRmFjdG9yeTogSU1lc3NlbmdlckZhY3Rvcnk8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4sIHdpbmRvd0NvbnRleHQ6IFdpbmRvdyk7XG4gIHB1YmxpYyBidWlsZChzZXJpYWxpemVkSW50ZXJmYWNlOiBEaWN0KTogTXBTZGs7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNka0Nvbm5lY3RvcjxUIGV4dGVuZHMgQ29ubmVjdFJlc3BvbnNlPiB7XG4gIGNvbm5lY3QoKTogUHJvbWlzZTxUPjtcbiAgY2FuY2VsQ29ubmVjdGluZygpOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzZW5nZXJGYWN0b3J5RmV0Y2hlcjxDb25uZWN0UmVzcG9uc2VUIGV4dGVuZHMgQ29ubmVjdFJlc3BvbnNlLCBPdXV0Z29pbmdEYXRhTWFwLCBJbmNvbWluZ0RhdGFNYXA+ID0ge1xuICBnZXRGYWN0b3J5KGNvbm5lY3RSZXNwb25zZTogQ29ubmVjdFJlc3BvbnNlVCk6IElNZXNzZW5nZXJGYWN0b3J5PE91dXRnb2luZ0RhdGFNYXAsIEluY29taW5nRGF0YU1hcD47XG59O1xuXG5leHBvcnQgbmFtZXNwYWNlIE1QX1NESyB7XG4gIGNvbnN0IGxpYkxvYWRlciA9IG5ldyBEeW5hbWljTGliTG9hZGVyKCk7XG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0PFQgZXh0ZW5kcyBDb25uZWN0UmVzcG9uc2UgPSBDb25uZWN0UmVzcG9uc2UsIE91dGdvaW5nRGF0YU1hcCA9IHVua25vd24sIEluY29taW5nRGF0YU1hcCA9IHVua25vd24+KFxuICAgIGNvbm5lY3RvcjogSVNka0Nvbm5lY3RvcjxUPixcbiAgICBmYWN0b3J5RmV0Y2hlcjogTWVzc2VuZ2VyRmFjdG9yeUZldGNoZXI8VCwgT3V0Z29pbmdEYXRhTWFwLCBJbmNvbWluZ0RhdGFNYXA+LFxuICAgIHdpbmRvd0NvbnRleHQ6IFdpbmRvdyxcbiAgKTogUHJvbWlzZTxNcFNkaz4ge1xuICAgIGxldCBjb25uZWN0UmVzcG9uc2U6IFQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbm5lY3RSZXNwb25zZSA9IGF3YWl0IGNvbm5lY3Rvci5jb25uZWN0KCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIGFmdGVyIGEgY29ubmVjdGlvbiBpcyBzdWNjZXNzZnVsIG9yIG5vdCwgc2h1dGRvd24gdGhlIGNvbm5lY3RvciBhbmQgaXRzIHBvc3RtZXNzYWdlIHJlY2VpdmluZyBtZXNzYWdlc1xuICAgICAgY29ubmVjdG9yLmNhbmNlbENvbm5lY3RpbmcoKTtcbiAgICB9XG5cbiAgICAvLyBmZXRjaCBhbmQgYnVpbGQgdGhlIGNsaWVudCBpbnRlcmZhY2VcbiAgICBjb25zdCBidWlsZGVyID0gYXdhaXQgZmV0Y2hTY3JpcHQoY29ubmVjdFJlc3BvbnNlLnNjcmlwdFVybCk7XG4gICAgLy8gc2V0IHVwIGEgZmFjdG9yeSBzbyB0aGF0IHRoZSBjbGllbnQgY2FuIGNyZWF0ZSBNZXNzZW5nZXIgY2hhbm5lbHNcbiAgICBjb25zdCBtZXNzZW5nZXJGYWN0b3J5ID0gZmFjdG9yeUZldGNoZXIuZ2V0RmFjdG9yeShjb25uZWN0UmVzcG9uc2UpO1xuICAgIC8vIGJ1aWxkIGFuZCByZXR1cm4gdGhlIGNsaWVudCBpbnRlcmZhY2UgdG8gdGhlIHVzZXJcbiAgICByZXR1cm4gYnVpbGRJbnRlcmZhY2Uod2luZG93Q29udGV4dCwgYnVpbGRlciwgbWVzc2VuZ2VyRmFjdG9yeSwgY29ubmVjdFJlc3BvbnNlLnNlcmlhbGl6ZWRJbnRlcmZhY2UpO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTY3JpcHQodXJsPzogc3RyaW5nKTogUHJvbWlzZTx0eXBlb2YgU2RrQnVpbGRlcj4ge1xuICAgIGlmICghdXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZWQgdG8gbG9hZCB0aGUgc2RrJyk7XG4gICAgfVxuXG4gICAgLy8gZmV0Y2ggYW5kIGNhY2hlIHRoZSBwcm9taXNlIGZvciB0aGUgcmVxdWVzdGVkIHNjcmlwdFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZGtDbGllbnQgPSBhd2FpdCBsaWJMb2FkZXIubG9hZDx7U2RrQnVpbGRlcjogdHlwZW9mIFNka0J1aWxkZXJ9Pih1cmwsICdzZGstY2xpZW50Jyk7XG4gICAgICBpZiAoc2RrQ2xpZW50ICYmIHNka0NsaWVudC5TZGtCdWlsZGVyICYmIHR5cGVvZiBzZGtDbGllbnQuU2RrQnVpbGRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gc2RrQ2xpZW50LlNka0J1aWxkZXI7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBjYXRjaCBhbGwgYW5kIFwiaWdub3JlXCIsIHNpbmNlIHdlJ2xsIHRocm93IHNob3J0bHkgYW55d2F5XG4gICAgfVxuICAgIHRocm93IEVycm9yKGBDb3VsZCBub3QgbG9hZCB0aGUgc2RrIGZyb20gJHt1cmx9YCk7XG4gIH1cblxuICBmdW5jdGlvbiBidWlsZEludGVyZmFjZTxPdXRnb2luZ0RhdGFNYXBULCBJbmNvbWluZ0RhdGFNYXBUPihcbiAgICB3aW5kb3dDb250ZXh0OiBXaW5kb3csXG4gICAgc2RrQnVpbGRlcjogdHlwZW9mIFNka0J1aWxkZXIsXG4gICAgbWVzc2VuZ2VyRmFjdG9yeTogSU1lc3NlbmdlckZhY3Rvcnk8T3V0Z29pbmdEYXRhTWFwVCwgSW5jb21pbmdEYXRhTWFwVD4sXG4gICAgc2VyaWFsaXplZEludGVyZmFjZTogRGljdCxcbiAgKTogUmV0dXJuVHlwZTxTZGtCdWlsZGVyWydidWlsZCddPiB7XG4gICAgcmV0dXJuIG5ldyBzZGtCdWlsZGVyKG1lc3NlbmdlckZhY3RvcnksIHdpbmRvd0NvbnRleHQpLmJ1aWxkKHNlcmlhbGl6ZWRJbnRlcmZhY2UpO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IEVycm9yVHlwZSB9IGZyb20gJy4vRXJyb3JzJztcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0gT3V0Z29pbmcgTWVzc2FnZXMgLS0tLS0tLS0tLS0tLS0tLS0gLy9cbmV4cG9ydCBlbnVtIE91dGdvaW5nTWVzc2FnZVR5cGUge1xuICBDT05ORUNUID0gJ3Bvc3RtZXNzYWdlLmNvbm5lY3QnLFxufVxuXG4vKipcbiAqIFRoZSBkYXRhIHBheWxvYWQgb2YgYSBDb25uZWN0IG1lc3NhZ2VcbiAqL1xuZXhwb3J0IHR5cGUgQ29ubmVjdFBheWxvYWQgPSB7XG4gIC8qKiBUaGUgdmVyc2lvbiBvZiB0aGUgc2RrIGJvb3RzdHJhcCBhdHRlbXB0aW5nIHRvIGNvbm5lY3QgKi9cbiAgYm9vdHN0cmFwVmVyc2lvbjogc3RyaW5nO1xuICBvcHRpb25zOiB7XG4gICAgLyoqIEFuIGF1dGggdG9rZW4gKi9cbiAgICBhdXRoPzogc3RyaW5nO1xuXG4gICAgLyoqIHByb3ZpZGVyIG5hbWUgKi9cbiAgICBwcm92aWRlcj86IHN0cmluZztcblxuICAgIHNka1R5cGU/OiBzdHJpbmc7XG4gIH0sXG4gIC8vIFRPRE8gKHNkayk6IHNkayBib290c3RyYXAgdjIueCBwYXNzZWQgdGhlIGFwcGxpY2F0aW9uS2V5OyByZW1vdmUgdGhpcyB3aGVuIHRob3NlIHZlcnNpb25zIGFyZSBubyBsb25nZXIgc3VwcG9ydGVkXG4gIGFwcGxpY2F0aW9uS2V5Pzogc3RyaW5nO1xufTtcblxuLyoqXG4gKiBBIG1hcCBiZXR3ZWVuIHRoZSBvdXRnb2luZyBtZXNzYWdlcyB0eXBlcyBhbmQgdGhlIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBtZXNzYWdlXG4gKi9cbmV4cG9ydCB0eXBlIE91dGdvaW5nRGF0YU1hcCA9IHtcbiAgW091dGdvaW5nTWVzc2FnZVR5cGUuQ09OTkVDVF06IENvbm5lY3RQYXlsb2FkLFxufTtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0gSW5jb21pbmcgTWVzc2FnZXMgLS0tLS0tLS0tLS0tLS0tLS0gLy9cbmV4cG9ydCBlbnVtIEluY29taW5nTWVzc2FnZVR5cGUge1xuICBIQU5EU0hBS0UgPSAncG9zdG1lc3NhZ2UuaGFuZHNoYWtlJyxcbiAgQUNDRVBUICAgID0gJ3Bvc3RtZXNzYWdlLmFjY2VwdCcsXG4gIFJFSkVDVCAgICA9ICdwb3N0bWVzc2FnZS5yZWplY3QnLFxufVxuXG4vKipcbiAqIFRoZSBkYXRhIG9mIGEgbWVzc2FnZSBzaWduYWxsaW5nIHRoYXQgdGhlIGNvbm5lY3Rpb24gd2FzIChtb3N0bHkpIGFjY2VwdGVkIGJ1dCBoYXNuJ3QgYmVlbiBmaW5hbGl6ZWQgeWV0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSGFuZHNoYWtlUGF5bG9hZCB7XG4gIC8qKiBETyBOT1QgVVNFOiBQbGFjZWhvbGRlciB0byBtYWtlIHRoaXMgdHlwZSB1bmlxdWUgZnJvbSBvdGhlciBtZXNzYWdlIERhdGEgdHlwZXMgKi9cbiAgdW51c2VkPzogJ2hhbmRzaGFrZS5kYXRhJztcbn1cblxuLyoqXG4gKiBUaGUgZGF0YSBvZiBhIG1lc3NhZ2Ugc2lnbmFsbGluZyB0aGUgY29ubmVjdGlvbiB0byB0aGUgaG9zdCB3YXMgYWNjZXB0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBY2NlcHRQYXlsb2FkIHtcbiAgLyoqIFRoZSBpZCB0aGF0IHdhcyBhc3NpZ25lZCB0byB0aGllIGNsaWVudCBiZWhpbmQgdGhpcyBjb25uZWN0aW9uICovXG4gIHNvdXJjZUlkOiBudW1iZXI7XG4gIC8qKiBUaGUgcmVtb3RlIHVybCBvZiB0aGUgY2xpZW50IHNjcmlwdCB0byBiZSBkeW5hbWljYWxseSBsb2FkZWQgKi9cbiAgc2NyaXB0VXJsOiBzdHJpbmc7XG4gIC8qKiBUaGUgc2VyaWFsaXplZCBpbnRlcmZhY2UgdGhhdCB0aGUgaG9zdCBzdXBwb3J0cyAqL1xuICBpbnRlcmZhY2U6IFJlY29yZDxzdHJpbmcsIHVua25vd24gfCB1bmRlZmluZWQ+O1xuICAvKiogVGhlIGlkIG9mIHRoZSBob3N0IHRoYXQgYWNjZXB0ZWQgdGhlIGNvbm5lY3Rpb24gKi9cbiAgdGFyZ2V0SWQ6IG51bWJlcjtcbiAgLyoqIFRoZSBvcmlnaW4gb2YgdGhlIGhvc3QgdGhhdCBhY2NlcHRlZCB0aGUgY29ubmVjdGlvbiAqL1xuICB0YXJnZXRPcmlnaW46IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGUgZGF0YSBvZiBhIG1lc3NhZ2Ugc2lnbmFsbGluZyB0aGF0IHRoZSBjb25uZWN0aW9uIHdhcyByZWplY3RlZCBvciBmYWlsZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZWplY3RQYXlsb2FkIHtcbiAgLyoqIFRoZSBlcnJvciBtZXNzYWdlIHdoeSBjb25uZWN0aW5nIGZhaWxlZCAqL1xuICByZWFzb246IHN0cmluZztcbiAgLyoqIFRoZSBzcGVjaWZpYyB0eXBlIG9mIGVycm9yIHRocm93biB3aGVuIGNvbm5lY3RpbmcgKi9cbiAgZXJyb3JUeXBlOiBFcnJvclR5cGU7XG59XG5cbi8qKlxuICogQSBtYXAgYmV0d2VlbiB0aGUgaW5jb21pbmcgbWVzc2FnZXMgdHlwZXMgYW5kIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVzc2FnZVxuICovXG5leHBvcnQgdHlwZSBJbmNvbWluZ0RhdGFNYXAgPSB7XG4gIFtJbmNvbWluZ01lc3NhZ2VUeXBlLkhBTkRTSEFLRV06IEhhbmRzaGFrZVBheWxvYWQ7XG4gIFtJbmNvbWluZ01lc3NhZ2VUeXBlLkFDQ0VQVF06IEFjY2VwdFBheWxvYWQ7XG4gIFtJbmNvbWluZ01lc3NhZ2VUeXBlLlJFSkVDVF06IFJlamVjdFBheWxvYWQ7XG59O1xuIiwiZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcbiAgQ0FOQ0VMTEVEID0gJ0Nvbm5lY3Rpb25DYW5jZWxsZWQnLFxuICBSRUZVU0VEID0gJ0Nvbm5lY3Rpb25SZWZ1c2VkJyxcbiAgSU5WQUxJRF9QUk9WSURFUiA9ICdJbnZhbGlkUHJvdmlkZXInLFxuICBLRVlfTUlTTUFUQ0ggPSAnS2V5UmVmZXJyZXJNaXNtYXRjaCcsXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2RrQ29ubmVjdEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICByZWFkb25seSB0eXBlOiBFcnJvclR5cGU7XG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cbiIsImltcG9ydCB0eXBlIHsgSU1lc3NhZ2UgfSBmcm9tICdAc2RrL21lc3NlbmdlcnMnO1xuaW1wb3J0IHR5cGUgeyBDb25uZWN0aW9uT3B0aW9ucyB9IGZyb20gJy4uL0Nvbm5lY3Rvcic7XG5pbXBvcnQgdHlwZSB7IENvbm5lY3RQYXlsb2FkLCBPdXRnb2luZ0RhdGFNYXB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBPdXRnb2luZ01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcblxuZXhwb3J0IGNsYXNzIENvbm5lY3RNZXNzYWdlIGltcGxlbWVudHMgSU1lc3NhZ2U8T3V0Z29pbmdNZXNzYWdlVHlwZS5DT05ORUNULCBPdXRnb2luZ0RhdGFNYXA+IHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGUgPSBPdXRnb2luZ01lc3NhZ2VUeXBlLkNPTk5FQ1Q7XG4gIHB1YmxpYyByZWFkb25seSBwYXlsb2FkOiBDb25uZWN0UGF5bG9hZDtcblxuICBjb25zdHJ1Y3Rvcihib290c3RyYXBWZXJzaW9uOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8Q29ubmVjdGlvbk9wdGlvbnM+ID0ge30pIHtcbiAgICB0aGlzLnBheWxvYWQgPSB7XG4gICAgICBib290c3RyYXBWZXJzaW9uLFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBhdXRoOiBvcHRpb25zLmF1dGgsXG4gICAgICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVyLFxuICAgICAgICBzZGtUeXBlOiBvcHRpb25zLnNka1R5cGUsXG4gICAgICB9LFxuICAgICAgYXBwbGljYXRpb25LZXk6IG9wdGlvbnMuYXBwbGljYXRpb25LZXksXG4gICAgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBDbGllbnRJbmZvLCBJTWVzc2FnZU9ic2VydmVyIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBIYW5kc2hha2VQYXlsb2FkIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhbmRzaGFrZVJlY2VpdmVyIHtcbiAgaGFuZHNoYWtlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBIYW5kc2hha2VPYnNlcnZlciBpbXBsZW1lbnRzIElNZXNzYWdlT2JzZXJ2ZXI8SW5jb21pbmdNZXNzYWdlVHlwZS5IQU5EU0hBS0UsIEluY29taW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZVR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkhBTkRTSEFLRTtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWNlaXZlcjogSGFuZHNoYWtlUmVjZWl2ZXIpIHsgfVxuXG4gIHB1YmxpYyBub3RpZnkoX2hhbmRzaGFrZTogSGFuZHNoYWtlUGF5bG9hZCwgX2NsaWVudEluZm86IENsaWVudEluZm8sIF90aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMucmVjZWl2ZXIuaGFuZHNoYWtlKCk7XG4gIH1cbn1cbiIsImltcG9ydCB0eXBlIHsgQ2xpZW50SW5mbywgSU1lc3NhZ2VPYnNlcnZlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IEluY29taW5nRGF0YU1hcCwgQWNjZXB0UGF5bG9hZCB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBJbmNvbWluZ01lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcblxudHlwZSBEaWN0PFQgPSB1bmtub3duPiA9IFJlY29yZDxzdHJpbmcsIFQgfCB1bmRlZmluZWQ+O1xuXG5leHBvcnQgaW50ZXJmYWNlIEFjY2VwdFJlY2VpdmVyIHtcbiAgYWNjZXB0KHNvdXJjZUlkOiBudW1iZXIsIHNjcmlwdFVybDogc3RyaW5nLCBzZXJpYWxpemVkSW50ZXJmYWNlOiBEaWN0LCB0YXJnZXRJZDogbnVtYmVyLCB0YXJnZXRPcmlnaW46IHN0cmluZyk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBY2NlcHRPYnNlcnZlciBpbXBsZW1lbnRzIElNZXNzYWdlT2JzZXJ2ZXI8SW5jb21pbmdNZXNzYWdlVHlwZS5BQ0NFUFQsIEluY29taW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgbWVzc2FnZVR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkFDQ0VQVDtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWNlaXZlcjogQWNjZXB0UmVjZWl2ZXIpIHt9XG5cbiAgcHVibGljIG5vdGlmeShhY2NlcHQ6IEFjY2VwdFBheWxvYWQsIF9jbGllbnRJbmZvOiBDbGllbnRJbmZvLCBfdGltZXN0YW1wOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB7IHNvdXJjZUlkLCBzY3JpcHRVcmwsIHRhcmdldElkLCB0YXJnZXRPcmlnaW4gfSA9IGFjY2VwdDtcbiAgICBjb25zdCBzZXJpYWxpemVkSW50ZXJmYWNlID0gYWNjZXB0LmludGVyZmFjZTsgLy8gY2FuJ3QgYmUgZGVzdHJ1Y3R1cmVkIGJlY2F1c2UgYGludGVyZmFjZWAgaXMgYSByZXNlcnZlZCB3b3JkXG5cbiAgICB0aGlzLnJlY2VpdmVyLmFjY2VwdChzb3VyY2VJZCwgc2NyaXB0VXJsLCBzZXJpYWxpemVkSW50ZXJmYWNlLCB0YXJnZXRJZCwgdGFyZ2V0T3JpZ2luKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRXJyb3JUeXBlLCB0eXBlIFNka0Nvbm5lY3RFcnJvciB9IGZyb20gJy4vdHlwZSc7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uUmVmdXNlZEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLlJFRlVTRUQ7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5uYW1lID0gJ0Nvbm5lY3Rpb25SZWZ1c2VkRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNsYXNzIEludmFsaWRQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLklOVkFMSURfUFJPVklERVI7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnSW52YWxpZFByb3ZpZGVyRXJyb3InO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IEVycm9yVHlwZSwgdHlwZSBTZGtDb25uZWN0RXJyb3IgfSBmcm9tICcuL3R5cGUnO1xuXG5leHBvcnQgY2xhc3MgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yIGV4dGVuZHMgRXJyb3IgaW1wbGVtZW50cyBTZGtDb25uZWN0RXJyb3Ige1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogRXJyb3JUeXBlID0gRXJyb3JUeXBlLktFWV9NSVNNQVRDSDtcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdLZXlSZWZlcnJlck1pc21hdGNoRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb25uZWN0aW9uUmVmdXNlZEVycm9yIH0gZnJvbSAnLi9Db25uZWN0aW9uUmVmdXNlZCc7XG5pbXBvcnQgeyBJbnZhbGlkUHJvdmlkZXJFcnJvciB9IGZyb20gJy4vSW52YWxpZFByb3ZpZGVyJztcbmltcG9ydCB7IEtleVJlZmVycmVyTWlzbWF0Y2hFcnJvciB9IGZyb20gJy4vS2V5UmVmZXJyZXJNaXNtYXRjaCc7XG5pbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IHsgQ29ubmVjdGlvblJlZnVzZWRFcnJvciB9IGZyb20gJy4vQ29ubmVjdGlvblJlZnVzZWQnO1xuZXhwb3J0IHsgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yIH0gZnJvbSAnLi9LZXlSZWZlcnJlck1pc21hdGNoJztcbmV4cG9ydCB7IEludmFsaWRQcm92aWRlckVycm9yIH0gZnJvbSAnLi9JbnZhbGlkUHJvdmlkZXInO1xuXG5leHBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNvbnN0IEVycm9yVHlwZU1hcDogS2V5ZWREaWN0PHR5cGVvZiBFcnJvclR5cGUsIG5ldyhtZXNzYWdlPzogc3RyaW5nKSA9PiBTZGtDb25uZWN0RXJyb3I+ID0ge1xuICBbRXJyb3JUeXBlLlJFRlVTRURdOiBDb25uZWN0aW9uUmVmdXNlZEVycm9yLFxuICBbRXJyb3JUeXBlLktFWV9NSVNNQVRDSF06IEtleVJlZmVycmVyTWlzbWF0Y2hFcnJvcixcbiAgW0Vycm9yVHlwZS5JTlZBTElEX1BST1ZJREVSXTogSW52YWxpZFByb3ZpZGVyRXJyb3IsXG59O1xuXG50eXBlIEtleWVkRGljdDxFIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4sIFYgPSBhbnk+ID0ge1xuICBba2V5IGluIEV4dHJhY3Q8RVtrZXlvZiBFXSwgbnVtYmVyIHwgc3RyaW5nPl0/OiBWO1xufTtcbiIsImltcG9ydCB0eXBlIHsgQ2xpZW50SW5mbywgSU1lc3NhZ2VPYnNlcnZlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IENvbm5lY3Rpb25SZWZ1c2VkRXJyb3IsIEludmFsaWRQcm92aWRlckVycm9yLCBLZXlSZWZlcnJlck1pc21hdGNoRXJyb3IgfSBmcm9tICcuLi9FcnJvcnMnO1xuaW1wb3J0IHsgRXJyb3JUeXBlTWFwIH0gZnJvbSAnLi4vRXJyb3JzJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBSZWplY3RQYXlsb2FkIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlamVjdFJlY2VpdmVyIHtcbiAgcmVqZWN0KHJlYXNvbjogQ29ubmVjdGlvblJlZnVzZWRFcnJvciB8IEludmFsaWRQcm92aWRlckVycm9yIHwgS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFJlamVjdE9ic2VydmVyIGltcGxlbWVudHMgSU1lc3NhZ2VPYnNlcnZlcjxJbmNvbWluZ01lc3NhZ2VUeXBlLlJFSkVDVCwgSW5jb21pbmdEYXRhTWFwPiB7XG4gIHB1YmxpYyByZWFkb25seSBtZXNzYWdlVHlwZSA9IEluY29taW5nTWVzc2FnZVR5cGUuUkVKRUNUO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlY2VpdmVyOiBSZWplY3RSZWNlaXZlcikge31cblxuICBwdWJsaWMgbm90aWZ5KHJlamVjdDogUmVqZWN0UGF5bG9hZCwgX2NsaWVudEluZm86IENsaWVudEluZm8sIF90aW1lc3RhbXA6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IGVycm9yVHlwZSA9IEVycm9yVHlwZU1hcFtyZWplY3QuZXJyb3JUeXBlXTtcbiAgICBpZiAoZXJyb3JUeXBlKSB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBlcnJvclR5cGUocmVqZWN0LnJlYXNvbik7XG4gICAgICB0aGlzLnJlY2VpdmVyLnJlamVjdChlcnJvcik7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBFcnJvclR5cGUsIHR5cGUgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi90eXBlJztcblxuZXhwb3J0IGNsYXNzIENvbm5lY3Rpb25DYW5jZWxsZWRFcnJvciBleHRlbmRzIEVycm9yIGltcGxlbWVudHMgU2RrQ29ubmVjdEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGU6IEVycm9yVHlwZSA9IEVycm9yVHlwZS5DQU5DRUxMRUQ7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdDb25uZWN0aW9uQ2FuY2VsbGVkRXJyb3InO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElVbmRpcmVjdGVkTWVzc2VuZ2VyLCBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcn0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB7IEFOWV9UQVJHRVQgfSBmcm9tICdAc2RrL21lc3NlbmdlcnMnO1xuaW1wb3J0IHR5cGUgeyBDb25uZWN0T3B0aW9ucyB9IGZyb20gJ0BzZGsvdHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBPdXRnb2luZ0RhdGFNYXAsIEluY29taW5nRGF0YU1hcCB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgeyBDb25uZWN0TWVzc2FnZSB9IGZyb20gJy4uL01lc3NhZ2VzL0Nvbm5lY3RNZXNzYWdlJztcbmltcG9ydCB7IEhhbmRzaGFrZU9ic2VydmVyIH0gZnJvbSAnLi4vTWVzc2FnZU9ic2VydmVycy9IYW5kc2hha2VPYnNlcnZlcic7XG5pbXBvcnQgeyBBY2NlcHRPYnNlcnZlciB9IGZyb20gJy4uL01lc3NhZ2VPYnNlcnZlcnMvQWNjZXB0T2JzZXJ2ZXInO1xuaW1wb3J0IHsgUmVqZWN0T2JzZXJ2ZXIgfSBmcm9tICcuLi9NZXNzYWdlT2JzZXJ2ZXJzL1JlamVjdE9ic2VydmVyJztcbmltcG9ydCB7IENvbm5lY3Rpb25DYW5jZWxsZWRFcnJvciB9IGZyb20gJy4uL0Vycm9ycy9DYW5jZWxsZWQnO1xuaW1wb3J0IHR5cGUgeyBTZGtDb25uZWN0RXJyb3IgfSBmcm9tICcuLi9FcnJvcnMnO1xuXG50eXBlIERpY3Q8VCA9IHVua25vd24+ID0gUmVjb3JkPHN0cmluZywgVCB8IHVuZGVmaW5lZD47XG5cbmVudW0gQ29ubmVjdGlvblN0YXRlIHtcbiAgSURMRSxcbiAgQ09OTkVDVElORyxcbiAgSEFORFNIQUtFLFxuICBDT05ORUNURUQsXG4gIFJFSkVDVEVELFxufVxuXG5leHBvcnQgdHlwZSBDb25uZWN0aW9uT3B0aW9ucyA9IENvbm5lY3RPcHRpb25zICYge1xuICAvKiogQGJhY2t3YXJkQ29tcGF0YWJpbGl0eSAqL1xuICBhcHBsaWNhdGlvbktleTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0UmVzcG9uc2Uge1xuICBzb3VyY2VJZDogbnVtYmVyO1xuICB0YXJnZXRJZDogbnVtYmVyO1xuICB0YXJnZXRPcmlnaW46IHN0cmluZztcbiAgc2NyaXB0VXJsOiBzdHJpbmc7XG4gIHNlcmlhbGl6ZWRJbnRlcmZhY2U6IERpY3Q7XG59XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0b3I8U291cmNlVD4ge1xuICBwcml2YXRlIGNvbm5lY3Rpb25TdGF0ZTogQ29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLklETEU7XG4gIHByaXZhdGUgY29ubmVjdGlvblBvbGw6IG51bWJlciB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uUHJvbWlzZTogUHJvbWlzZTxDb25uZWN0UmVzcG9uc2U+O1xuICBwcml2YXRlIHJlc29sdmVDb25uZWN0aW9uITogKHZhbHVlOiBDb25uZWN0UmVzcG9uc2UpID0+IHZvaWQ7XG4gIHByaXZhdGUgcmVqZWN0Q29ubmVjdGlvbiE6IChyZWFzb246IFNka0Nvbm5lY3RFcnJvcikgPT4gdm9pZDtcblxuICBwcml2YXRlIGhhbmRzaGFrZU9ic2VydmVyOiBIYW5kc2hha2VPYnNlcnZlcjtcbiAgcHJpdmF0ZSBhY2NlcHRPYnNlcnZlcjogQWNjZXB0T2JzZXJ2ZXI7XG4gIHByaXZhdGUgcmVqZWN0T2JzZXJ2ZXI6IFJlamVjdE9ic2VydmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgbWVzc2VuZ2VyOiBJVW5kaXJlY3RlZE1lc3NlbmdlcjxPdXRnb2luZ0RhdGFNYXAsIEluY29taW5nRGF0YU1hcCwgU291cmNlVD4sXG4gICAgcHJpdmF0ZSB0YXJnZXQ6IElVbmRpcmVjdGVkTWVzc2VuZ2VyU2VuZGVyPE91dGdvaW5nRGF0YU1hcCwgU291cmNlVD4sXG4gICAgcHJpdmF0ZSBzb3VyY2U6IFNvdXJjZVRcbiAgKSB7XG4gICAgY2xhc3MgQ29ubmVjdG9yRmFjYWRlIHtcbiAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29ubmVjdG9yOiBDb25uZWN0b3I8U291cmNlVD4pIHt9XG4gICAgICBwdWJsaWMgaGFuZHNoYWtlKCkge1xuICAgICAgICB0aGlzLmNvbm5lY3Rvci5oYW5kc2hha2UoKTtcbiAgICAgIH1cbiAgICAgIHB1YmxpYyBhY2NlcHQoc291cmNlSWQ6IG51bWJlciwgc2NyaXB0VXJsOiBzdHJpbmcsIHNlcmlhbGl6ZWRJbnRlcmZhY2U6IERpY3QsIHRhcmdldElkOiBudW1iZXIsIHRhcmdldE9yaWdpbjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdG9yLmFjY2VwdChzb3VyY2VJZCwgc2NyaXB0VXJsLCBzZXJpYWxpemVkSW50ZXJmYWNlLCB0YXJnZXRJZCwgdGFyZ2V0T3JpZ2luKTtcbiAgICAgIH1cbiAgICAgIHB1YmxpYyByZWplY3QocmVhc29uOiBTZGtDb25uZWN0RXJyb3IpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0b3IucmVqZWN0KHJlYXNvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29ubmVjdG9yRmFjYWRlID0gbmV3IENvbm5lY3RvckZhY2FkZSh0aGlzKTtcblxuICAgIHRoaXMuaGFuZHNoYWtlT2JzZXJ2ZXIgPSBuZXcgSGFuZHNoYWtlT2JzZXJ2ZXIoY29ubmVjdG9yRmFjYWRlKTtcbiAgICB0aGlzLmFjY2VwdE9ic2VydmVyID0gbmV3IEFjY2VwdE9ic2VydmVyKGNvbm5lY3RvckZhY2FkZSk7XG4gICAgdGhpcy5yZWplY3RPYnNlcnZlciA9IG5ldyBSZWplY3RPYnNlcnZlcihjb25uZWN0b3JGYWNhZGUpO1xuICAgIHRoaXMuY29ubmVjdGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcbiAgICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb24gPSByZXM7XG4gICAgICB0aGlzLnJlamVjdENvbm5lY3Rpb24gPSByZWo7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgY29ubmVjdCh2ZXJzaW9uOiBzdHJpbmcsIG9wdGlvbnM6IFBhcnRpYWw8Q29ubmVjdGlvbk9wdGlvbnM+ID0ge30pOiBQcm9taXNlPENvbm5lY3RSZXNwb25zZT4ge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLklETEUpIHtcbiAgICAgIHRoaXMuY29ubmVjdGlvblN0YXRlID0gQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RJTkc7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5hZGRPYnNlcnZlcih0aGlzLmhhbmRzaGFrZU9ic2VydmVyKTtcbiAgICAgIHRoaXMubWVzc2VuZ2VyLmFkZE9ic2VydmVyKHRoaXMuYWNjZXB0T2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5tZXNzZW5nZXIuYWRkT2JzZXJ2ZXIodGhpcy5yZWplY3RPYnNlcnZlcik7XG4gICAgICAvLyBUT0RPOiBmaWd1cmUgb3V0IGEgYmV0dGVyIHdheSB0byBlbnN1cmUgY29ubmVjdGlvblxuICAgICAgdGhpcy5jb25uZWN0aW9uUG9sbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIC8vIHNlbmQgdGhlIG1lc3NhZ2UgdG8gYW55Ym9keSB3aG8ncyBsaXN0ZW5pbmcgd2l0aGluIHRoZSB0YXJnZXQgd2luZG93XG4gICAgICAgIHRoaXMubWVzc2VuZ2VyLnNlbmQobmV3IENvbm5lY3RNZXNzYWdlKHZlcnNpb24sIG9wdGlvbnMpLCBBTllfVEFSR0VULCB0aGlzLnRhcmdldCwgdGhpcy5zb3VyY2UpO1xuICAgICAgfSwgNTAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uUHJvbWlzZTtcbiAgfVxuXG4gIHB1YmxpYyBjYW5jZWxDb25uZWN0aW5nKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvbm5lY3Rpb25TdGF0ZSA8IENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQpIHtcbiAgICAgIHRoaXMuc3RvcENvbm5lY3RQb2xsaW5nKCk7XG4gICAgICB0aGlzLnJlamVjdENvbm5lY3Rpb24obmV3IENvbm5lY3Rpb25DYW5jZWxsZWRFcnJvcignVXNlciBtYW51YWxseSBjYW5jZWxsZWQgY29ubmVjdGlvbicpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRzaGFrZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPCBDb25uZWN0aW9uU3RhdGUuSEFORFNIQUtFKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5IQU5EU0hBS0U7XG4gICAgICB0aGlzLnN0b3BDb25uZWN0UG9sbGluZygpO1xuXG4gICAgICB0aGlzLm1lc3Nlbmdlci5yZW1vdmVPYnNlcnZlcih0aGlzLmhhbmRzaGFrZU9ic2VydmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFjY2VwdChzb3VyY2VJZDogbnVtYmVyLCBzY3JpcHRVcmw6IHN0cmluZywgc2VyaWFsaXplZEludGVyZmFjZTogRGljdCwgdGFyZ2V0SWQ6IG51bWJlciwgdGFyZ2V0T3JpZ2luOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPCBDb25uZWN0aW9uU3RhdGUuQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQ7XG5cbiAgICAgIHRoaXMubWVzc2VuZ2VyLnJlbW92ZU9ic2VydmVyKHRoaXMuaGFuZHNoYWtlT2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5tZXNzZW5nZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcy5hY2NlcHRPYnNlcnZlcik7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5yZW1vdmVPYnNlcnZlcih0aGlzLnJlamVjdE9ic2VydmVyKTtcbiAgICAgIHRoaXMuc3RvcENvbm5lY3RQb2xsaW5nKCk7XG5cbiAgICAgIHRoaXMucmVzb2x2ZUNvbm5lY3Rpb24oe1xuICAgICAgICBzb3VyY2VJZCxcbiAgICAgICAgdGFyZ2V0SWQsXG4gICAgICAgIHRhcmdldE9yaWdpbixcbiAgICAgICAgc2NyaXB0VXJsLFxuICAgICAgICBzZXJpYWxpemVkSW50ZXJmYWNlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZWplY3QocmVhc29uOiBTZGtDb25uZWN0RXJyb3IpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5jb25uZWN0aW9uU3RhdGUgPCBDb25uZWN0aW9uU3RhdGUuQ09OTkVDVEVEKSB7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdGF0ZSA9IENvbm5lY3Rpb25TdGF0ZS5SRUpFQ1RFRDtcblxuICAgICAgdGhpcy5tZXNzZW5nZXIucmVtb3ZlT2JzZXJ2ZXIodGhpcy5oYW5kc2hha2VPYnNlcnZlcik7XG4gICAgICB0aGlzLm1lc3Nlbmdlci5yZW1vdmVPYnNlcnZlcih0aGlzLmFjY2VwdE9ic2VydmVyKTtcbiAgICAgIHRoaXMubWVzc2VuZ2VyLnJlbW92ZU9ic2VydmVyKHRoaXMucmVqZWN0T2JzZXJ2ZXIpO1xuICAgICAgdGhpcy5zdG9wQ29ubmVjdFBvbGxpbmcoKTtcblxuICAgICAgdGhpcy5yZWplY3RDb25uZWN0aW9uKHJlYXNvbik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzdG9wQ29ubmVjdFBvbGxpbmcoKTogdm9pZCB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmNvbm5lY3Rpb25Qb2xsKTtcbiAgICB0aGlzLmNvbm5lY3Rpb25Qb2xsID0gdW5kZWZpbmVkO1xuICB9XG5cbn1cbiIsImltcG9ydCB0eXBlIHsgSW5kZXhLZXkgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8qKlxuICogQW4gb2JqZWN0IHRvIHVzZSBpbiBwbGFjZSBvZiBhIGNhbGxiYWNrXG4gKiBBdm9pZHMgaXNzdWVzIHdpdGggdW5ib3VuZCBmdW5jdGlvbnNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJT2JzZXJ2ZXI8VCBleHRlbmRzIHVua25vd25bXT4ge1xuICBub3RpZnkoLi4uZGF0YTogVCk6IHZvaWQ7XG59XG5cbi8qKlxuICogSW5mb3JtYXRpb24gYWJvdXQgYSBjbGllbnQgc2VuZGluZyBtZXNzYWdlc1xuICovXG5leHBvcnQgdHlwZSBDbGllbnRJbmZvID0ge1xuICBpZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEFuIG9ic2VydmVyIGFzc29jaWF0ZWQgd2l0aCBhIHNwZWNpZmljIHR5cGUgb2YgbWVzc2FnZVxuICogTm90aWZpZWQgb2YgaW5jb21pbmcgbWVzc2FnZXMgb2YgdHlwZSBgSW5jb21pbmdNZXNzYWdlVHlwZWBcbiAqXG4gKiBAcGFyYW0gSW5jb21pbmdNZXNzYWdlVHlwZSBUaGUgbWVzc2FnZSB0eXBlIHRvIGxpc3RlbiBmb3JcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIEEgbWFwIGJldHdlZW4gSW5jb21pbmdNZXNzYWdlVHlwZSBhbmQgZGF0YSByZWNlaXZlZCBhbmQgdXNlZCB3aXRoaW4gYG5vdGlmeWBcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTWVzc2FnZU9ic2VydmVyPFxuICBJbmNvbWluZ01lc3NhZ2VUeXBlIGV4dGVuZHMga2V5b2YgSW5jb21pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbiAgQ2xpZW50SW5mb1QgZXh0ZW5kcyBDbGllbnRJbmZvID0gQ2xpZW50SW5mbyxcbj4ge1xuICAvKiogVGhlIG1lc3NhZ2UgdHlwZSB0byBsaXN0ZW4gZm9yICovXG4gIHJlYWRvbmx5IG1lc3NhZ2VUeXBlOiBJbmNvbWluZ01lc3NhZ2VUeXBlO1xuICAvKiogQSBjYWxsYmFjayBjYWxsZWQgd2hlbiBhbiBJTWVzc2FnZSByZWNlaXZlcyBhbiBgSW5jb21pbmdNZXNzYWdlVHlwZWAgbWVzc2FnZSAqL1xuICBub3RpZnkocGF5bG9hZDogSW5jb21pbmdEYXRhTWFwVFtJbmNvbWluZ01lc3NhZ2VUeXBlXSwgY2xpZW50SW5mbzogQ2xpZW50SW5mb1QsIHNlbnRBdFRpbWVzdGFtcDogbnVtYmVyKTogdm9pZDtcbn1cblxuLyoqXG4gKiBBIGZhY3RvcnkgdG8gY3JlYXRlIElNZXNzZW5nZXJzXG4gKlxuICogQHBhcmFtIE91dGdvaW5nRGF0YU1hcFQgVGhlIG91dGdvaW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkXG4gKiBAcGFyYW0gSW5jb21pbmdEYXRhTWFwVCBUaGUgaW5jb21pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJTWVzc2VuZ2VyRmFjdG9yeTxPdXRnb2luZ0RhdGFNYXBULEluY29taW5nRGF0YU1hcFQ+IHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJTWVzc2VuZ2VyIHRoYXQgY2FuIHNlbmQgYE91dGdvaW5nRGF0YU1hcFRgIGFuZCBjYW4gcmVjZWl2ZSBgSW5jb21pbmdEYXRhTWFwVGBcbiAgICovXG4gIGNyZWF0ZU1lc3NlbmdlcigpOiBJTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcFQsIEluY29taW5nRGF0YU1hcFQ+O1xufVxuXG4vKipcbiAqIEEgYmktZGlyZWN0aW9uYWwgY29tbXVuaWNhdG9yIHRoYXQgY2FuXG4gKiAtIHJlY2VpdmUgbWVzc2FnZSBvZiB0eXBlIGBrZXlvZiBJbmNvbWluZ0RhdGFNYXBUYCB2aWEgb2JzZXJ2ZXJzXG4gKiAtIHNlbmQgbWVzc2FnZXMgb2YgdHlwZSBga2V5b2YgT3V0Z29pbmdEYXRhTWFwVGBcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZCBieSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzZW5nZXI8XG4gIE91dGdvaW5nRGF0YU1hcFQsXG4gIEluY29taW5nRGF0YU1hcFQsXG4+IHtcbiAgLyoqIHRlYXIgZG93biB0aGlzIG1lc3NlbmdlciAqL1xuICBpbml0KCk6IHZvaWQ7XG4gIC8qKiB0ZWFyIGRvd24gdGhpcyBtZXNzZW5nZXIgKi9cbiAgZGlzcG9zZSgpOiB2b2lkO1xuICAvKiogUmVnaXN0ZXIgYW4gYG9ic2VydmVyYCB0byBsaXN0ZW4gZm9yIGluY29taW5nIG1lc3NhZ2VzICovXG4gIGFkZE9ic2VydmVyKG9ic2VydmVyOiBJTWVzc2FnZU9ic2VydmVyPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPik6IHZvaWQ7XG4gIC8qKiBSZW1vdmUgYW4gYG9ic2VydmVyYCBmcm9tIGxpc3RlbmluZyB0byBpbmNvbWluZyBtZXNzYWdlcyAqL1xuICByZW1vdmVPYnNlcnZlcihvYnNlcnZlcjogSU1lc3NhZ2VPYnNlcnZlcjxJbmRleEtleTxJbmNvbWluZ0RhdGFNYXBUPiwgSW5jb21pbmdEYXRhTWFwVD4pOiB2b2lkO1xuICAvKiogU2VuZCBhIGBtZXNzYWdlYCB0byB0aGUgdGFyZ2V0ICovXG4gIHNlbmQobWVzc2FnZTogSU1lc3NhZ2U8SW5kZXhLZXk8T3V0Z29pbmdEYXRhTWFwVD4sIE91dGdvaW5nRGF0YU1hcFQ+KTogdm9pZDtcbn1cblxuLyoqXG4gKiBBIGJyaWRnZSBiZXR3ZWVuIGEgbWVzc2VuZ2VyIGFuZCB0aGUgdW5kZXJseWluZyBtZXNzZW5naW5nIG1lY2hhbmlzbSwgYWxsb3dpbmcgdGhlIG1lc3NlbmdlciB0byBiZSBtb3JlIGdlbmVyaWNcbiAqIFVzZWZ1bCBpbiBhYnN0cmFjdGluZyBhd2F5IHNvbWV0aGluZyBsaWtlIHdpbmRvdy5wb3N0TWVzc2FnZSBmcm9tIGFuIGBJTWVzc2VuZ2VyYFxuICpcbiAqIEBwYXJhbSBPdXRnb2luZ0RhdGFNYXBUIFRoZSBvdXRnb2luZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZFxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NlbmdlckJyaWRnZTxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbj4ge1xuICAvKiogVHVybiBvbiB0aGUgYWJpbGl0eSB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20gYW5vdGhlciBjbGllbnQgKi9cbiAgbGlzdGVuKG9ic2VydmVyOiBJT2JzZXJ2ZXI8W0lCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgQ2xpZW50SW5mb10+KTogdm9pZDtcbiAgLyoqIFR1cm4gb2ZmIHRoZSBhYmlsaXR5IHRvIHJlY2VpdmUgbWVzc2FnZXMgKi9cbiAgc3RvcExpc3RlbmluZygpOiB2b2lkO1xuICAvKiogU2VuZCBtZXNzYWdlIHRvIHRoZSBhbm90aGVyIGNsaWVudCAqL1xuICBzZW5kKG1lc3NhZ2U6IElCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+LCBPdXRnb2luZ0RhdGFNYXBUPik6IHZvaWQ7XG59XG5cbi8qKlxuICogQSBiaS1kaXJlY3Rpb25hbCBjb21tdW5pY2F0b3IgdGhhdCBjYW5cbiAqIC0gb3Blbmx5IHJlY2VpdmUgbWVzc2FnZXMgb2YgdHlwZSBga2V5b2YgSW5jb21pbmdEYXRhTWFwVGAgdmlhIG9ic2VydmVycyBmcm9tIHVuc3BlY2lmaWVkIHNvdXJjZXNcbiAqIC0gc2VuZCBtZXNzYWdlcyBvZiB0eXBlIGBrZXlvZiBPdXRnb2luZ0RhdGFNYXBUYCB0byB0YXJnZXRzIHNwZWNpZmllZCB3aGVuIHNlbmRpbmdcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqIEBwYXJhbSBJbmNvbWluZ0RhdGFNYXBUIFRoZSBpbmNvbWluZyBtZXNzYWdlIHR5cGVzIHN1cHBvcnRlZCBieSByZWdpc3RlcmVkIG9ic2VydmVyc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElVbmRpcmVjdGVkTWVzc2VuZ2VyPFxuICBPdXRnb2luZ0RhdGFNYXBULFxuICBJbmNvbWluZ0RhdGFNYXBULFxuICBTb3VyY2VULFxuPiB7XG4gIC8qKiBSZWdpc3RlciBhbiBgb2JzZXJ2ZXJgIHRvIGxpc3RlbiBmb3IgaW5jb21pbmcgbWVzc2FnZXMgKi9cbiAgYWRkT2JzZXJ2ZXIob2JzZXJ2ZXI6IElNZXNzYWdlT2JzZXJ2ZXI8SW5kZXhLZXk8SW5jb21pbmdEYXRhTWFwVD4sIEluY29taW5nRGF0YU1hcFQ+KTogdm9pZDtcbiAgLyoqIFJlbW92ZSBhbiBgb2JzZXJ2ZXJgIGZyb20gbGlzdGVuaW5nIHRvIGluY29taW5nIG1lc3NhZ2VzICovXG4gIHJlbW92ZU9ic2VydmVyKG9ic2VydmVyOiBJTWVzc2FnZU9ic2VydmVyPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPik6IHZvaWQ7XG4gIC8qKiBTZW5kIGEgYG1lc3NhZ2VgIHRvIHRoZSBgdGFyZ2V0YCAqL1xuICBzZW5kKFxuICAgIG1lc3NhZ2U6IElNZXNzYWdlPEluZGV4S2V5PE91dGdvaW5nRGF0YU1hcFQ+LCBPdXRnb2luZ0RhdGFNYXBUPixcbiAgICB0YXJnZXRJZDogbnVtYmVyIHwgdHlwZW9mIEFOWV9UQVJHRVQsIHRhcmdldDogSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXI8T3V0Z29pbmdEYXRhTWFwVCwgU291cmNlVD4sXG4gICAgc291cmNlOiBTb3VyY2VULFxuICApOiB2b2lkO1xuICAvKiogVGVhciBkb3duIHRoaXMgbWVzc2VuZ2VyICovXG4gIGRpc3Bvc2UoKTogdm9pZDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWwgaWQgdG8gc3ltYm9saXplIHRoZSBtZXNzYWdlIHNob3VsZCBnbyB0byBhbGwgb3RoZXIgYElVbmRpcmVjdGVkTGlzdGVuZXJzYC5cbiAqIEZvciB1c2Ugd2l0aCBgSVVuZGlyZWN0ZWRNZXNzZW5nZXJgIGFuZCBgSVVuZGlyZWN0ZWRNZXNzZW5nZXJTZW5kZXJgLlxuICovXG5leHBvcnQgY29uc3QgQU5ZX1RBUkdFVCA9IC0xO1xuXG4vKipcbiAqIEEgYnJpZGdlIGJldHdlZW4gYSBtZXNzZW5nZXIgYW5kIHRoZSB1bmRlcmx5aW5nIG1lc3NhZ2UgcmVjZWl2aW5nIG1lY2hhbmlzbSwgYWxsb3dpbmcgdGhlIG1lc3NlbmdlciB0byBiZSBtb3JlIGdlbmVyaWNcbiAqIFVzZWZ1bCBpbiBhYnN0cmFjdGluZyBhd2F5IHNvbWV0aGluZyBsaWtlIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIGZyb20gYW4gYElNZXNzZW5nZXJgXG4gKlxuICogQHBhcmFtIEluY29taW5nRGF0YU1hcFQgVGhlIGluY29taW5nIG1lc3NhZ2UgdHlwZXMgc3VwcG9ydGVkIGJ5IHJlZ2lzdGVyZWQgb2JzZXJ2ZXJzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVVuZGlyZWN0ZWRNZXNzZW5nZXJMaXN0ZW5lcjxcbiAgSW5jb21pbmdEYXRhTWFwVCxcbj4ge1xuICAvKiogVHVybiBvbiB0aGUgYWJpbGl0eSB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20gYW5vdGhlciBjbGllbnQgKi9cbiAgbGlzdGVuKG9ic2VydmVyOiBJT2JzZXJ2ZXI8W0lCcmlkZ2VNZXNzYWdlPEluZGV4S2V5PEluY29taW5nRGF0YU1hcFQ+LCBJbmNvbWluZ0RhdGFNYXBUPiwgQ2xpZW50SW5mb10+KTogdm9pZDtcbiAgLyoqIFR1cm4gb2ZmIHRoZSBhYmlsaXR5IHRvIHJlY2VpdmUgbWVzc2FnZXMgKi9cbiAgc3RvcExpc3RlbmluZygpOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgYnJpZGdlIGJldHdlZW4gYSBtZXNzZW5nZXIgYW5kIHRoZSB1bmRlcmx5aW5nIG1lc3NhZ2Ugc2VuZGluZyBtZWNoYW5pc20sIGFsbG93aW5nIHRoZSBtZXNzZW5nZXIgdG8gYmUgbW9yZSBnZW5lcmljXG4gKiBVc2VmdWwgaW4gYWJzdHJhY3RpbmcgYXdheSBzb21ldGhpbmcgbGlrZSB3aW5kb3cucG9zdE1lc3NhZ2UgZnJvbSBhbiBgSU1lc3NlbmdlcmBcbiAqXG4gKiBAcGFyYW0gT3V0Z29pbmdEYXRhTWFwVCBUaGUgb3V0Z29pbmcgbWVzc2FnZSB0eXBlcyBzdXBwb3J0ZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJVW5kaXJlY3RlZE1lc3NlbmdlclNlbmRlcjxcbiAgT3V0Z29pbmdEYXRhTWFwVCxcbiAgU291cmNlVCxcbj4ge1xuICAvKiogU2VuZCBtZXNzYWdlIHRvIHRoZSBjbGllbnQgKi9cbiAgc2VuZChtZXNzYWdlOiBJQnJpZGdlTWVzc2FnZTxJbmRleEtleTxPdXRnb2luZ0RhdGFNYXBUPiwgT3V0Z29pbmdEYXRhTWFwVD4sIHNvdXJjZTogU291cmNlVCk6IHZvaWQ7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgZGF0YSBmb3IgZWFjaCBtZXNzYWdlIChib3RoIG91dGdvaW5nIGFuZCBpbmNvbWluZylcbiAqXG4gKiBAcGFyYW0gTWVzc2FnZVR5cGUgVGhlIHR5cGUgb2YgdGhlIG1lc3NhZ2VcbiAqIEBwYXJhbSBQYXlsb2FkTWFwIFRoZSBtYXAgYmV0d2VlbiBtZXNzYWdlIHR5cGVzIGFuZCB0aGVpciBwYXlsb2Fkc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIElNZXNzYWdlPFxuICBNZXNzYWdlVHlwZSBleHRlbmRzIGtleW9mIFBheWxvYWRNYXBULFxuICBQYXlsb2FkTWFwVCxcbj4ge1xuICAvKiogVGhlIHNwZWNpZmljIHR5cGUgb2YgbWVzc2FnZSAqL1xuICB0eXBlOiBNZXNzYWdlVHlwZTtcbiAgLyoqIFRoZSBkYXRhIHRvIHNlbmQgKi9cbiAgcGF5bG9hZDogUGF5bG9hZE1hcFRbTWVzc2FnZVR5cGVdO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGRhdGEgZm9yIGVhY2ggbG93ZXIgbGV2ZWwgbWVzc2FnZSB0eXBlcyBiZWluZyByZWNlaXZlZCBieSB0aGUgYnJpZGdlc1xuICpcbiAqIEBwYXJhbSBNZXNzYWdlVHlwZSBUaGUgdHlwZSBvZiB0aGUgbWVzc2FnZVxuICogQHBhcmFtIFBheWxvYWRNYXAgVGhlIG1hcCBiZXR3ZWVuIG1lc3NhZ2UgdHlwZXMgYW5kIHRoZWlyIHBheWxvYWRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUJyaWRnZU1lc3NhZ2U8XG4gIE1lc3NhZ2VUeXBlIGV4dGVuZHMga2V5b2YgUGF5bG9hZE1hcFQsXG4gIFBheWxvYWRNYXBULFxuPiB7XG4gIC8qKiBUaGUgc3BlY2lmaWMgdHlwZSBvZiBtZXNzYWdlICovXG4gIHR5cGU6IE1lc3NhZ2VUeXBlO1xuICAvKiogVGhlIGRhdGEgcmVjZWl2ZWQgKi9cbiAgcGF5bG9hZDogUGF5bG9hZE1hcFRbTWVzc2FnZVR5cGVdO1xuICAvKiogVGhlIHRpbWVzdGFtcCBvZiB3aGVuIHRoZSBtZXNzYWdlIHdhcyBzZW50ICovXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICAvKiogVGhlIGlkIG9mIHRoZSBjbGllbnQgc2VuZGluZyB0aGUgbWVzc2FnZSAqL1xuICBmcm9tSWQ6IG51bWJlcjtcbiAgLyoqIFRoZSBpZCBvZiB0aGUgY2xpZW50IHRoYXQgc2hvdWxkIHJlY2VpdmUgdGhpcyBtZXNzYWdlICovXG4gIHRvSWQ6IG51bWJlciB8IG51bWJlcltdO1xufVxuIiwiaW1wb3J0IHsgUG9zdE1lc3NhZ2VGYWN0b3J5LCBQb3N0TWVzc2FnZUxpc3RlbmVyLCBQb3N0TWVzc2FnZVNlbmRlciwgVW5kaXJlY3RlZE1lc3NlbmdlciB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IElTZGtDb25uZWN0b3J9IGZyb20gJy4vTVBfU0RLJztcbmltcG9ydCB7IE1QX1NESyB9IGZyb20gJy4vTVBfU0RLJztcbmltcG9ydCB0eXBlIHsgQ29ubmVjdGlvbk9wdGlvbnMsIENvbm5lY3RSZXNwb25zZSB9IGZyb20gJy4vQ29ubmVjdG9yJztcbmltcG9ydCB7IENvbm5lY3RvciB9IGZyb20gJy4vQ29ubmVjdG9yJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBPdXRnb2luZ0RhdGFNYXAgfSBmcm9tICcuL01lc3NhZ2VUeXBlcyc7XG5pbXBvcnQgdHlwZSB7IE1wU2RrLCBDb25uZWN0T3B0aW9ucyB9IGZyb20gJ0BzZGsvdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9ICczLjAnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdCh0YXJnZXRXaW5kb3c6IEhUTUxJRnJhbWVFbGVtZW50LCBhcHBsaWNhdGlvbktleTogc3RyaW5nKTogUHJvbWlzZTxNcFNkaz47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdCh0YXJnZXRXaW5kb3c6IEhUTUxJRnJhbWVFbGVtZW50LCBvcHRpb25zPzogUGFydGlhbDxDb25uZWN0T3B0aW9ucz4pOiBQcm9taXNlPE1wU2RrPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0KHRhcmdldFdpbmRvdzogSFRNTElGcmFtZUVsZW1lbnQsIG9wdGlvbnM6IHN0cmluZyB8IFBhcnRpYWw8Q29ubmVjdE9wdGlvbnM+ID0ge30pOiBQcm9taXNlPE1wU2RrPiB7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gY29ubmVjdFdpdGhBcHBsaWNhdGlvbktleSh0YXJnZXRXaW5kb3csIG9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb25uZWN0V2l0aE9wdGlvbnModGFyZ2V0V2luZG93LCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbm5lY3QgdXNpbmcgYW4gYXBwbGljYXRpb24ga2V5IHBhcmFtZXRlclxuICpcbiAqIEBiYWNrd2FyZENvbXBhdGFiaWxpdHlcbiAqIEBwYXJhbSB0YXJnZXRXaW5kb3dcbiAqIEBwYXJhbSBhcHBsaWNhdGlvbktleVxuICovXG5mdW5jdGlvbiBjb25uZWN0V2l0aEFwcGxpY2F0aW9uS2V5KHRhcmdldFdpbmRvdzogSFRNTElGcmFtZUVsZW1lbnQsIGFwcGxpY2F0aW9uS2V5OiBzdHJpbmcpOiBQcm9taXNlPE1wU2RrPiB7XG4gIGNvbnNvbGUud2FybihgTVBfU0RLOiBjb25uZWN0aW5nIHVzaW5nIGFuIFxcYGFwcGxpY2F0aW9uS2V5XFxgIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSBhZGQgdGhlIGtleSB0byB0aGUgaWZyYW1lJ3MgVVJMIHBhcmFtZXRlcnMgaW5zdGVhZC5gKTtcbiAgcmV0dXJuIGNvbm5lY3RXaXRoT3B0aW9ucyh0YXJnZXRXaW5kb3csIHtcbiAgICBhcHBsaWNhdGlvbktleSxcbiAgfSk7XG59XG5cbi8qKlxuICogQ29ubmVjdCB3aXRoIGEgY29ubmVjdGlvbiBvcHRpb25zIG9iamVjdFxuICogQHBhcmFtIHRhcmdldFdpbmRvd1xuICogQHBhcmFtIG9wdGlvbnNcbiAqL1xuZnVuY3Rpb24gY29ubmVjdFdpdGhPcHRpb25zKHRhcmdldFdpbmRvdzogSFRNTElGcmFtZUVsZW1lbnQsIG9wdGlvbnM6IFBhcnRpYWw8Q29ubmVjdGlvbk9wdGlvbnM+ID0ge30pOiBQcm9taXNlPE1wU2RrPiB7XG4gIGNvbnN0IHRhcmdldCA9IGdldFdpbmRvdyh0YXJnZXRXaW5kb3cpO1xuICBpZiAoIXRhcmdldCkgcmV0dXJuIFByb21pc2UucmVqZWN0KCdpbnZhbGlkIHdpbmRvdycpO1xuXG4gIC8vIGNyZWF0ZSBhIHdheSB0byBjcmVhdGUgY29tbXVuaWNhdGlvbiBjaGFubmVscyAoSU1lc3NhZ2UpIGFuZCBzZXQgdXAgYSBQb3N0TWVzc2FnZSB0byB1c2UgZm9yIGNvbm5lY3RpbmdcbiAgY29uc3Qgc291cmNlSWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTsgLy8gYSB0ZW1wIGlkIHRvIHVzZSB3aGlsZSBjb25uZWN0aW5nXG4gIGNvbnN0IHBvc3RNZXNzYWdlTGlzdGVuZXIgPSBuZXcgUG9zdE1lc3NhZ2VMaXN0ZW5lcjxJbmNvbWluZ0RhdGFNYXA+KHdpbmRvdyk7XG4gIGNvbnN0IHBvc3RNZXNhZ2VTZW5kZXIgPSBuZXcgUG9zdE1lc3NhZ2VTZW5kZXI8T3V0Z29pbmdEYXRhTWFwPih0YXJnZXQpO1xuICBjb25zdCBwb3N0TWVzc2FnZSA9IG5ldyBVbmRpcmVjdGVkTWVzc2VuZ2VyPE91dGdvaW5nRGF0YU1hcCwgSW5jb21pbmdEYXRhTWFwLCBXaW5kb3c+KHNvdXJjZUlkLCBwb3N0TWVzc2FnZUxpc3RlbmVyKTtcbiAgcG9zdE1lc3NhZ2UuaW5pdCgpO1xuXG4gIC8vIGNvbm5lY3RcbiAgY29uc3QgY29ubmVjdG9yID0gbmV3IENvbm5lY3RvcjxXaW5kb3c+KHBvc3RNZXNzYWdlLCBwb3N0TWVzYWdlU2VuZGVyLCB3aW5kb3cpO1xuICByZXR1cm4gTVBfU0RLLmNvbm5lY3QobmV3IEVtYmVkQ29ubmVjdG9yKGNvbm5lY3RvciwgcG9zdE1lc3NhZ2UsIG9wdGlvbnMpLCBuZXcgRW1iZWRNZXNzZW5nZXJGYWN0b3J5RmV0Y2hlcih0YXJnZXQpLCB3aW5kb3cpO1xufVxuXG5mdW5jdGlvbiBnZXRXaW5kb3coZWxlbWVudDogSFRNTElGcmFtZUVsZW1lbnQpOiBXaW5kb3cgfCBudWxsIHtcbiAgaWYgKGVsZW1lbnQuY29udGVudFdpbmRvdykgcmV0dXJuIGVsZW1lbnQuY29udGVudFdpbmRvdztcbiAgcmV0dXJuIG51bGw7XG59XG5cbmNsYXNzIEVtYmVkQ29ubmVjdG9yIGltcGxlbWVudHMgSVNka0Nvbm5lY3RvcjxDb25uZWN0UmVzcG9uc2U+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjb25uZWN0b3I6IENvbm5lY3RvcjxXaW5kb3c+LFxuICAgIHByaXZhdGUgcG9zdE1lc3NhZ2U6IFVuZGlyZWN0ZWRNZXNzZW5nZXI8T3V0Z29pbmdEYXRhTWFwLCBJbmNvbWluZ0RhdGFNYXAsIFdpbmRvdz4sXG4gICAgcHJpdmF0ZSBvcHRpb25zOiBQYXJ0aWFsPENvbm5lY3Rpb25PcHRpb25zPixcbiAgKSB7fVxuICBwdWJsaWMgY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0b3IuY29ubmVjdCh2ZXJzaW9uLCB0aGlzLm9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGNhbmNlbENvbm5lY3RpbmcoKSB7XG4gICAgdGhpcy5wb3N0TWVzc2FnZS5kaXNwb3NlKCk7XG4gIH1cbn1cblxuY2xhc3MgRW1iZWRNZXNzZW5nZXJGYWN0b3J5RmV0Y2hlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGFyZ2V0OiBXaW5kb3cpIHt9XG4gIHB1YmxpYyBnZXRGYWN0b3J5KGNvbm5lY3RSZXNwb25zZTogQ29ubmVjdFJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIG5ldyBQb3N0TWVzc2FnZUZhY3RvcnkoY29ubmVjdFJlc3BvbnNlLnNvdXJjZUlkLCB3aW5kb3csIGNvbm5lY3RSZXNwb25zZS50YXJnZXRJZCwgdGhpcy50YXJnZXQsIGNvbm5lY3RSZXNwb25zZS50YXJnZXRPcmlnaW4pO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElNZXNzYWdlIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgSGFuZHNoYWtlUGF5bG9hZCwgSW5jb21pbmdEYXRhTWFwfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuaW1wb3J0IHsgSW5jb21pbmdNZXNzYWdlVHlwZSB9IGZyb20gJy4uL01lc3NhZ2VUeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBIYW5kc2hha2VNZXNzYWdlIGltcGxlbWVudHMgSU1lc3NhZ2U8SW5jb21pbmdNZXNzYWdlVHlwZS5IQU5EU0hBS0UsIEluY29taW5nRGF0YU1hcD4ge1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZSA9IEluY29taW5nTWVzc2FnZVR5cGUuSEFORFNIQUtFO1xuICBwdWJsaWMgcmVhZG9ubHkgcGF5bG9hZDogSGFuZHNoYWtlUGF5bG9hZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBheWxvYWQgPSB7fTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBJTWVzc2FnZSB9IGZyb20gJ0BzZGsvbWVzc2VuZ2Vycyc7XG5pbXBvcnQgdHlwZSB7IEFjY2VwdFBheWxvYWQsIEluY29taW5nRGF0YU1hcH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQWNjZXB0TWVzc2FnZSBpbXBsZW1lbnRzIElNZXNzYWdlPEluY29taW5nTWVzc2FnZVR5cGUuQUNDRVBULCBJbmNvbWluZ0RhdGFNYXA+IHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLkFDQ0VQVDtcbiAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IEFjY2VwdFBheWxvYWQ7XG5cbiAgLy8gVE9PRCAoc2RrIDEueCBzdXBwb3J0KTogU0RLIGJvb3RzdHJhcCAxLnggZXhwZWN0cyB0aGUgYGludGVyZmFjZWAgdG8gYmUgYXQgdGhlIHJvb3Qgb2YgdGhlIG1lc3NhZ2VzXG4gIHB1YmxpYyBpbnRlcmZhY2U6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gIGNvbnN0cnVjdG9yKHNjcmlwdFVybDogc3RyaW5nLCBjbGllbnRJbnRlcmZhY2U6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LCBzb3VyY2VJZDogbnVtYmVyLCB0YXJnZXRJZDogbnVtYmVyLCB0YXJnZXRPcmlnaW46IHN0cmluZykge1xuICAgIHRoaXMucGF5bG9hZCA9IHtcbiAgICAgIHNjcmlwdFVybCxcbiAgICAgIGludGVyZmFjZTogY2xpZW50SW50ZXJmYWNlLFxuICAgICAgc291cmNlSWQsXG4gICAgICB0YXJnZXRJZCxcbiAgICAgIHRhcmdldE9yaWdpbixcbiAgICB9O1xuICAgIHRoaXMuaW50ZXJmYWNlID0gY2xpZW50SW50ZXJmYWNlO1xuICB9XG59XG4iLCJpbXBvcnQgdHlwZSB7IElNZXNzYWdlIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgU2RrQ29ubmVjdEVycm9yIH0gZnJvbSAnLi4vRXJyb3JzJztcbmltcG9ydCB0eXBlIHsgSW5jb21pbmdEYXRhTWFwLCBSZWplY3RQYXlsb2FkIH0gZnJvbSAnLi4vTWVzc2FnZVR5cGVzJztcbmltcG9ydCB7IEluY29taW5nTWVzc2FnZVR5cGUgfSBmcm9tICcuLi9NZXNzYWdlVHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUmVqZWN0TWVzc2FnZSBpbXBsZW1lbnRzIElNZXNzYWdlPEluY29taW5nTWVzc2FnZVR5cGUuUkVKRUNULCBJbmNvbWluZ0RhdGFNYXA+IHtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGUgPSBJbmNvbWluZ01lc3NhZ2VUeXBlLlJFSkVDVDtcbiAgcHVibGljIHJlYWRvbmx5IHBheWxvYWQ6IFJlamVjdFBheWxvYWQ7XG5cbiAgLy8gVE9PRCAoc2RrIDEueCBzdXBwb3J0KTogU0RLIGJvb3RzdHJhcCAxLnggZXhwZWN0cyB0aGUgYHJlYXNvbmAgdG8gYmUgYXQgdGhlIHJvb3Qgb2YgdGhlIG1lc3NhZ2VzXG4gIHB1YmxpYyByZWFzb246IHN0cmluZztcbiAgY29uc3RydWN0b3IoZXJyb3I6IFNka0Nvbm5lY3RFcnJvcikge1xuICAgIHRoaXMucGF5bG9hZCA9IHtcbiAgICAgIHJlYXNvbjogZXJyb3IubWVzc2FnZSxcbiAgICAgIGVycm9yVHlwZTogZXJyb3IudHlwZSxcbiAgICB9O1xuICAgIHRoaXMucmVhc29uID0gZXJyb3IubWVzc2FnZTtcbiAgfVxufVxuIiwiaW1wb3J0IHR5cGUgeyBDbGllbnRJbmZvLCBJTWVzc2FnZU9ic2VydmVyIH0gZnJvbSAnQHNkay9tZXNzZW5nZXJzJztcbmltcG9ydCB0eXBlIHsgT3V0Z29pbmdEYXRhTWFwLCBDb25uZWN0UGF5bG9hZCB9IGZyb20gJ0BzZGsvYm9vdHN0cmFwJztcbmltcG9ydCB7IE91dGdvaW5nTWVzc2FnZVR5cGUgfSBmcm9tICdAc2RrL2Jvb3RzdHJhcCc7XG5cbi8qKlxuICogQW4gb2JzZXJ2ZXIgdGhhdCByZWNlaXZlcyBgQ29ubmVjdFBheWxvYWRgIG9iamVjdHMgaW4gaXRzIGBvbkNvbm5lY3Rpb25SZWNlaXZlZGAgY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJQ29ubmVjdE9ic2VydmVyPFQgZXh0ZW5kcyBDbGllbnRJbmZvPiB7XG4gIG9uQ29ubmVjdGlvblJlY2VpdmVkKGNvbm5lY3Q6IENvbm5lY3RQYXlsb2FkLCBjbGllbnRJbmZvOiBUKTogdm9pZDtcbn1cblxuLyoqXG4gKiBBbiBhZGFwdG9yIHRvIG1ha2UgYW4gYElDb25uZWN0T2JzZXJ2ZXJgIGxvb2sgbGlrZSBhbiBgSU1lc3NhZ2VPYnNlcnZlcmAgKHdpdGggYSBgbm90aWZ5YCBmdW5jdGlvbilcbiAqIENhbGxzIHRoZSBpbnB1dCBvYmplY3QncyBgb25Db25uZWN0aW9uUmVjZWl2ZWRgIHdoZW4gYSBgQ09OTkVDVGAgbWVzc2FnZSBpcyByZWNlaXZlZCBvbiB0aGUgYElNZXNzZW5nZXJgIHRoaXMgaXMgcmVnaXN0ZXJlZCB3aXRoLlxuICovXG5leHBvcnQgY2xhc3MgQ29ubmVjdE1lc3NhZ2VPYnNlcnZlcjxUIGV4dGVuZHMgQ2xpZW50SW5mbz4gaW1wbGVtZW50cyBJTWVzc2FnZU9ic2VydmVyPE91dGdvaW5nTWVzc2FnZVR5cGUuQ09OTkVDVCwgT3V0Z29pbmdEYXRhTWFwLCBUPiB7XG4gIHB1YmxpYyByZWFkb25seSBtZXNzYWdlVHlwZSA9IE91dGdvaW5nTWVzc2FnZVR5cGUuQ09OTkVDVDtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWNlaXZlcjogSUNvbm5lY3RPYnNlcnZlcjxUPikge31cblxuICBwdWJsaWMgbm90aWZ5KGNvbm5lY3Q6IENvbm5lY3RQYXlsb2FkLCBjbGllbnRJbmZvOiBUKTogdm9pZCB7XG4gICAgdGhpcy5yZWNlaXZlci5vbkNvbm5lY3Rpb25SZWNlaXZlZChjb25uZWN0LCBjbGllbnRJbmZvKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBvc3RNZXNzYWdlTGlzdGVuZXIiLCJjb25zdHJ1Y3RvciIsInRhcmdldFdpbmRvdyIsIm1lc3NhZ2VPYnNlcnZlciIsInRoaXMiLCJvbk1lc3NhZ2UiLCJldmVudCIsIm1lc3NhZ2UiLCJkYXRhIiwibm90aWZ5IiwiaWQiLCJmcm9tSWQiLCJvcmlnaW4iLCJzb3VyY2UiLCJ0aW1lc3RhbXAiLCJsaXN0ZW4iLCJvYnNlcnZlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wTGlzdGVuaW5nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvc3RNZXNzYWdlU2VuZGVyIiwidGFyZ2V0T3JpZ2luIiwic2VuZCIsIl9zb3VyY2UiLCJwb3N0TWVzc2FnZSIsIkJyaWRnZU9ic2VydmVyIiwibWVzc2FnZVJlY2VpdmVyIiwiY2xpZW50SW5mbyIsIm9uTWVzc2FnZVJlY2VpdmVkIiwiRGljdEFycmF5IiwidmFsdWVzIiwiYWRkIiwia2V5IiwidmFsdWUiLCJnZXRWYWx1ZXNBdEtleSIsInB1c2giLCJyZW1vdmUiLCJ2YWx1ZXNBdEtleSIsImlkeCIsImluZGV4T2YiLCJzcGxpY2UiLCJyZW1vdmVLZXkiLCJ2YWx1ZXNQZXJLZXkiLCJsZW5ndGgiLCJmaW5kIiwidmFsRmluZGVyIiwia2V5cyIsIk9iamVjdCIsImhhc0tleSIsImhhcyIsInZhbCIsImluY2x1ZGVzIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJVbmRpcmVjdGVkTWVzc2VuZ2VyIiwic291cmNlSWQiLCJsaXN0ZW5lckJyaWRnZSIsIm9ic2VydmVycyIsImluaXQiLCJtZXNzZW5nZXJGYWNhZGUiLCJtZXNzZW5nZXIiLCJicmlkZ2VPYnNlcnZlciIsImRpc3Bvc2UiLCJhZGRPYnNlcnZlciIsIm1lc3NhZ2VUeXBlIiwicmVtb3ZlT2JzZXJ2ZXIiLCJ0YXJnZXRJZCIsInRhcmdldCIsInRvSWQiLCJEYXRlIiwibm93IiwidHlwZSIsIm1lc3NhZ2VPYnNlcnZlcnMiLCJwYXlsb2FkIiwiRXJyb3JNZXNzYWdlQnJpZGdlIiwiRXJyb3IiLCJNZXNzZW5nZXIiLCJtZXNzYWdlQnJpZGdlIiwidG9GaWx0ZXJlZE1lc3NlbmdlciIsInNlbmRGaWx0ZXIiLCJyZWN2RmlsdGVyIiwiZmlsdGVyZWRNZXNzZW5nZXIiLCJGaWx0ZXJlZE1lc3NlbmdlciIsIm1zZ1R5cGUiLCJvIiwiZmlsdGVyTWVzc2FnZUlkIiwiQXJyYXkiLCJ1bmRlZmluZWQiLCJzdXBlciIsImVycm9yQnJpZGdlIiwiUG9zdE1lc3NhZ2VCcmlkZ2UiLCJzb3VyY2VXaW5kb3ciLCJsaXN0ZW5lciIsInNlbmRlciIsIlBvc3RNZXNzYWdlRmFjdG9yeSIsImNyZWF0ZU1lc3NlbmdlciIsInBvc3RNZXNzYWdlQnJpZGdlIiwiTVBfU0RLIiwibGliTG9hZGVyIiwiRHluYW1pY0xpYkxvYWRlciIsImNvbm5lY3QiLCJjb25uZWN0b3IiLCJmYWN0b3J5RmV0Y2hlciIsIndpbmRvd0NvbnRleHQiLCJjb25uZWN0UmVzcG9uc2UiLCJjYW5jZWxDb25uZWN0aW5nIiwiYnVpbGRlciIsInVybCIsInNka0NsaWVudCIsImxvYWQiLCJTZGtCdWlsZGVyIiwiZmV0Y2hTY3JpcHQiLCJzY3JpcHRVcmwiLCJtZXNzZW5nZXJGYWN0b3J5IiwiZ2V0RmFjdG9yeSIsInNka0J1aWxkZXIiLCJzZXJpYWxpemVkSW50ZXJmYWNlIiwiYnVpbGQiLCJidWlsZEludGVyZmFjZSIsIk91dGdvaW5nTWVzc2FnZVR5cGUiLCJJbmNvbWluZ01lc3NhZ2VUeXBlIiwiRXJyb3JUeXBlIiwiQ29ubmVjdE1lc3NhZ2UiLCJib290c3RyYXBWZXJzaW9uIiwib3B0aW9ucyIsIkNPTk5FQ1QiLCJhdXRoIiwicHJvdmlkZXIiLCJzZGtUeXBlIiwiYXBwbGljYXRpb25LZXkiLCJIYW5kc2hha2VPYnNlcnZlciIsInJlY2VpdmVyIiwiSEFORFNIQUtFIiwiX2hhbmRzaGFrZSIsIl9jbGllbnRJbmZvIiwiX3RpbWVzdGFtcCIsImhhbmRzaGFrZSIsIkFjY2VwdE9ic2VydmVyIiwiQUNDRVBUIiwiYWNjZXB0IiwiaW50ZXJmYWNlIiwiQ29ubmVjdGlvblJlZnVzZWRFcnJvciIsIlJFRlVTRUQiLCJuYW1lIiwiSW52YWxpZFByb3ZpZGVyRXJyb3IiLCJJTlZBTElEX1BST1ZJREVSIiwiS2V5UmVmZXJyZXJNaXNtYXRjaEVycm9yIiwiS0VZX01JU01BVENIIiwiRXJyb3JUeXBlTWFwIiwiUmVqZWN0T2JzZXJ2ZXIiLCJSRUpFQ1QiLCJyZWplY3QiLCJlcnJvclR5cGUiLCJlcnJvciIsInJlYXNvbiIsIkNvbm5lY3Rpb25DYW5jZWxsZWRFcnJvciIsIkNBTkNFTExFRCIsIkNvbm5lY3Rpb25TdGF0ZSIsIkNvbm5lY3RvciIsImNvbm5lY3Rpb25TdGF0ZSIsIklETEUiLCJjb25uZWN0aW9uUG9sbCIsImNvbm5lY3RvckZhY2FkZSIsImhhbmRzaGFrZU9ic2VydmVyIiwiYWNjZXB0T2JzZXJ2ZXIiLCJyZWplY3RPYnNlcnZlciIsImNvbm5lY3Rpb25Qcm9taXNlIiwiUHJvbWlzZSIsInJlcyIsInJlaiIsInJlc29sdmVDb25uZWN0aW9uIiwicmVqZWN0Q29ubmVjdGlvbiIsInZlcnNpb24iLCJDT05ORUNUSU5HIiwid2luZG93Iiwic2V0SW50ZXJ2YWwiLCJDT05ORUNURUQiLCJzdG9wQ29ubmVjdFBvbGxpbmciLCJSRUpFQ1RFRCIsImNsZWFySW50ZXJ2YWwiLCJjb25zb2xlIiwid2FybiIsImNvbm5lY3RXaXRoT3B0aW9ucyIsImNvbm5lY3RXaXRoQXBwbGljYXRpb25LZXkiLCJlbGVtZW50IiwiY29udGVudFdpbmRvdyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBvc3RNZXNzYWdlTGlzdGVuZXIiLCJwb3N0TWVzYWdlU2VuZGVyIiwiRW1iZWRDb25uZWN0b3IiLCJFbWJlZE1lc3NlbmdlckZhY3RvcnlGZXRjaGVyIiwiSGFuZHNoYWtlTWVzc2FnZSIsIkFjY2VwdE1lc3NhZ2UiLCJjbGllbnRJbnRlcmZhY2UiLCJSZWplY3RNZXNzYWdlIiwiQ29ubmVjdE1lc3NhZ2VPYnNlcnZlciIsIm9uQ29ubmVjdGlvblJlY2VpdmVkIl0sInNvdXJjZVJvb3QiOiIifQ==