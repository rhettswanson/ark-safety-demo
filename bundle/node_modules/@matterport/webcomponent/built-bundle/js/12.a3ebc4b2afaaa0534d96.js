/*! For license information please see 12.a3ebc4b2afaaa0534d96.js.LICENSE.txt */
"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[12],{73927:(t,e,n)=>{n.d(e,{h:()=>r});var i=n(89103);class r extends i.QB{constructor(t,e){super(),this.width=t,this.height=e}}},45395:(t,e,n)=>{var i;n.d(e,{D:()=>i}),function(t){t[t.Immediate=0]="Immediate",t[t.NextFrame=1]="NextFrame",t[t.Duration=2]="Duration",t[t.Manual=3]="Manual",t[t.Debounced=4]="Debounced"}(i||(i={}))},76234:(t,e,n)=>{n.d(e,{Xw:()=>i,gj:()=>h,jz:()=>d});var i,r=n(79070),s=n(21440),o=n(244),a=n(45395);!function(t){t.added="added",t.removed="removed",t.updated="updated"}(i||(i={}));class h{constructor(t,e,n){this.index=t,this.action=e,this.diff=n}}class d{constructor(t,e){if(this.changedHandlers=[],this.awaitingInvoke=!1,this.diffRecord=[],this.targetMonitors={},this.triggerChangeHandlers=this.invokeChangeHandlers.bind(this),this.config=t,this.updatePhaseSync=e,this.config.aggregationType===a.D.NextFrame){if(!e)throw Error("UpdatePhaseSync required for NextFrame aggregation")}else{if(this.config.aggregationType===a.D.Duration)throw Error("Aggregation Type not implemented");this.config.aggregationType===a.D.Debounced&&(this.triggerChangeHandlers=(0,r.s)(this.invokeChangeHandlers.bind(this),t.aggregationDuration))}}hasDiffRecord(){return this.diffRecord.length>0}clearDiffRecord(){this.diffRecord=[];for(const t in this.targetMonitors){const e=this.targetMonitors[t];e.hasDiffRecord()&&e.clearDiffRecord()}this.awaitingInvoke=!1}onChanged(t){this.changedHandlers.push(t)}removeOnChanged(t){(0,s.Nz)(this.changedHandlers,t)}invokeCallbacks(t){if(this.changedHandlers.length>0)for(const e of this.changedHandlers)e(t)}invokeChangeHandlers(t){var e;switch(this.config.aggregationType){case a.D.Immediate:case a.D.Debounced:this.invokeCallbacks(t);break;case a.D.NextFrame:this.awaitingInvoke||(this.awaitingInvoke=!0,null===(e=this.updatePhaseSync)||void 0===e||e.after(o.R.End).then((()=>{this.awaitingInvoke&&(this.invokeCallbacks(t),this.awaitingInvoke=!1)})));case a.D.Manual:}}}},35473:(t,e,n)=>{n.d(e,{F:()=>o});var i=n(28913),r=n(76234),s=n(2391);class o extends r.jz{constructor(t,e,n){super(e,n),this.target=t;for(const i of t.keys){const r=t.get(i),o=new s.V(r,e,n);o.onChanged(this.triggerChangeHandlers),this.targetMonitors[i]=o}const o={onAdded:(t,o)=>{const a=new s.V(t,e,n);a.onChanged(this.triggerChangeHandlers),this.targetMonitors[o]=a;const h=this.diffRecord.findIndex((t=>t.index===o));-1!==h&&this.diffRecord.splice(h,1);const d=new r.gj(o,r.Xw.added,(0,i.A4)(t));-1===h&&this.diffRecord.push(d),this.triggerChangeHandlers(d)},onRemoved:(t,e)=>{delete this.targetMonitors[e];const n=this.diffRecord.findIndex((t=>t.index===e));-1!==n&&this.diffRecord.splice(n,1);const s=new r.gj(e,r.Xw.removed,(0,i.A4)(t));-1===n&&this.diffRecord.push(s),this.triggerChangeHandlers(s)}};this.target.onElementChanged(o)}commitChanges(){this.invokeCallbacks(this.getDiffRecord())}getDiffRecord(){const t=[];for(const e in this.targetMonitors){const n=this.targetMonitors[e];if(n.hasDiffRecord()){const s=n.getDiffRecord(),o=this.diffRecord.findIndex((t=>t.index===e));-1!==o?(0,i.h1)(this.diffRecord[o].diff,s):t.push(new r.gj(e,r.Xw.updated,s))}}return this.diffRecord.concat(t)}}},2391:(t,e,n)=>{n.d(e,{V:()=>h});var i=n(79070),r=n(21440),s=n(28913),o=n(244),a=n(45395);class h{constructor(t,e,n){this.updatePhaseSync=n,this.target=t,this.clearDiffRecord(),this.aggregationType=e.aggregationType,this.aggregationType===a.D.Debounced&&(this.handleAggregation=(0,i.s)(this.handleAggregation.bind(this),e.aggregationDuration||30)),this.target.onChanged((()=>{this.diffRecord=(0,s.bB)(this.originalData,(0,s.A4)(this.target),e.shallow),this.handleAggregation()})),this.changedHandlers=[]}hasDiffRecord(){return Object.keys(this.diffRecord).length>0}getDiffRecord(){return this.diffRecord}clearDiffRecord(){this.originalData=(0,s.A4)(this.target),this.diffRecord={}}onChanged(t){this.changedHandlers.push(t)}removeOnChanged(t){(0,r.Nz)(this.changedHandlers,t)}commitChanges(){this.triggerChangeHandlers(this.diffRecord)}handleAggregation(){switch(this.aggregationType){case a.D.Immediate:this.triggerChangeHandlers(this.diffRecord);break;case a.D.NextFrame:if(!this.updatePhaseSync)throw new Error("handleAggregation() -> Next frame aggregation requested, but updatePhaseSync is null");this.nextFramePromise||(this.nextFramePromise=this.updatePhaseSync.after(o.R.Begin).then((()=>{this.triggerChangeHandlers(this.diffRecord)})).finally((()=>{this.nextFramePromise=void 0})));break;case a.D.Debounced:this.triggerChangeHandlers(this.diffRecord);break;case a.D.Duration:throw new Error("AggregationType.Duration: Please implement me :)");case a.D.Manual:}}triggerChangeHandlers(t){if(this.changedHandlers.length>0)for(const e of this.changedHandlers)e(t)}}},15404:(t,e,n)=>{var i;n.d(e,{p:()=>i}),function(t){t.BLURS="blurs",t.BLUR_SUGGESTIONS="blur-suggestions",t.FLOORS="floors",t.HIGHLIGHTS="highlights",t.LABELS="labels",t.MATTERTAGS="mattertags",t.MEASUREMENTS="measurements",t.NOTES="notes",t.OBJECT_ANNOTATIONS="objectAnnotations",t.ORDERED_LISTS="orderedLists",t.PHOTOS="photos",t.PLUGINS="plugins",t.SETTINGS="settings",t.START_LOCATION="startlocation",t.SWEEPS="sweeps",t.LAYERS="layers",t.ROOM_BOUNDS="room_bounds"}(i||(i={}))},94790:(t,e,n)=>{n.d(e,{Qm:()=>a,SK:()=>r,Ve:()=>h,_w:()=>o,jF:()=>s});var i=n(92475);class r extends i.E{constructor(t,e,n,i,r=0){super(),this.position=t,this.buttons=e,this.device=n,this.ctrlKey=i,this.pointerId=r}}class s extends i.E{constructor(t,e,n,i,r,s=0){super(),this.ctrlKey=!1,this.position=t,this.clientPosition=i,this.delta=e,this.buttons=n,this.device=r,this.pointerId=s}}class o extends i.E{constructor(t,e,n,i,r,s,o=0){super(),this.ctrlKey=!1,this.position=t,this.delta=e,this.buttons=n,this.timeSinceLastMove=i,this.fullDelta=r,this.device=s,this.pointerId=o}}class a extends i.E{constructor(t,e){super(),this.position=t,this.pointer=e}}class h extends i.E{constructor(t,e,n,i){super(),this.position=t,this.startPosition=e,this.fullDelta=n,this.pointer=i}}},60043:(t,e,n)=>{n.d(e,{k:()=>r});var i=n(49586);class r extends i.T{constructor(t,e,n){super(),this.key=t,this.state=e,this.modifiers=n}}},90834:(t,e,n)=>{n.d(e,{O:()=>s});var i=n(84710),r=n(44351);class s extends i.B{constructor(){super(...arguments),this.name="interaction",this._source=s.defaultSource,this._mode=s.defaultMode}static get defaultMode(){return r.o.Desktop}static get defaultSource(){return r.m.None}get mode(){return this._mode}get source(){return this._source}updateSource(t){this._source=t}updateMode(t){this._mode=t}hasController(t=this.mode){return t===r.o.VrWithController||t===r.o.VrWithTrackedController}isVR(t=this.mode){return t===r.o.VrOrientOnly||t===r.o.VrWithTrackedController||t===r.o.VrWithController||t===r.o.VrTransientPointer||-1!==t.indexOf(r.o.VrUnknown)}isMobile(t=this.mode){return t===r.o.Mobile}}},6687:(t,e,n)=>{n.d(e,{aV:()=>a,c$:()=>o,f_:()=>h});var i=n(68909),r=n(5984);const s=t=>t instanceof r.r,o=t=>s(t),a=t=>t instanceof i.Object3D&&s(t)&&t.raycastEnabled&&t.visible,h=t=>{let e=!!t.visible;e&&t instanceof i.Object3D&&t.traverseAncestors((t=>{e&&(e=t.visible)}));return!o(t)&&e||a(t)}},81530:(t,e,n)=>{n.d(e,{F:()=>r});var i=n(55141);class r extends i.u{constructor(t){super(),this.payload=t}}r.id="SAVE_COMMAND"},30443:(t,e,n)=>{n.d(e,{U7:()=>d,UX:()=>h,Wi:()=>g,h0:()=>s,jF:()=>u,nD:()=>l});var i=n(68909),r=n(81662);function s(t){if(0===t.length)throw Error("Can't merge empty list of geometries");if(1===t.length)return t[0];let e=0,n=0,r=0,s=0;const a=new i.Box3;for(const i of t)i.index&&(e+=i.index.count,n+=i.getAttribute("position").count,i.getAttribute("uv")&&(r+=i.getAttribute("uv").count),i.boundingBox&&(a.union(i.boundingBox),s++));const d=new i.BufferGeometry;s!==t.length||a.isEmpty()?d.computeBoundingBox():d.boundingBox=a,a.copy(h(d)),d.boundingSphere=a.getBoundingSphere(new i.Sphere);const c=o(new Float32Array(3*n),"position",t);d.setAttribute("position",new i.BufferAttribute(c,3));const g=function(t,e){let n=0,i=0;for(const r of e){const e=r.index;for(let r=0;r<e.array.length;r++)t[n+r]=e.array[r]+i;n+=e.array.length,i+=r.getAttribute("position").count}return t}(new Uint32Array(e),t);if(d.setIndex(new i.BufferAttribute(g,1)),r){const e=o(new Float32Array(2*r),"uv",t);d.setAttribute("uv",new i.BufferAttribute(e,2))}return d}function o(t,e,n){let i=0;for(const r of n){const n=r.getAttribute(e);t.set(n.array,i),i+=n.array.length}return t}const a=new i.Box3(r.B1.ZERO,r.B1.UNIT);function h(t){return t.boundingBox||t.computeBoundingBox(),t.boundingBox||a}function d(t,e){let n=1/0;const r=e.clone(),s=new i.Vector3,o=new i.Vector3(1/0,1/0,1/0);let a=-1;const h=new i.Triangle;return function(t,e){var n;const i=null===(n=t.index)||void 0===n?void 0:n.array,r=t.getAttribute("position");if(!r)return;const s=t.groups.length>0?t.groups:[{start:0,count:i?i.length:r.count,materialIndex:0}];let o=0;for(const t of s)for(let n=t.start;n<t.start+t.count;n+=3){let s=n,a=n+1,h=n+2;i&&(s=i[s],a=i[a],h=i[h]),e(r.getX(s),r.getY(s),r.getZ(s),r.getX(a),r.getY(a),r.getZ(a),r.getX(h),r.getY(h),r.getZ(h),o++,t.materialIndex||0)}}(t,((t,e,i,d,c,g,u,l,f,m)=>{h.a.set(t,e,i),h.b.set(d,c,g),h.c.set(u,l,f),h.closestPointToPoint(r,s);const p=r.distanceToSquared(s);p<n&&(o.copy(s),n=p,a=m)})),{point:o,distance:Math.sqrt(n),faceIndex:a}}const c=new i.PlaneGeometry(1,1);function g(){return c}const u=(t,e)=>{e=e||[];for(let t=0;t<8;t++)e[t]=e[t]||new i.Vector3;return e[0].set(t.min.x,t.min.y,t.min.z),e[1].set(t.min.x,t.max.y,t.min.z),e[2].set(t.max.x,t.max.y,t.min.z),e[3].set(t.max.x,t.min.y,t.min.z),e[4].set(t.min.x,t.min.y,t.max.z),e[5].set(t.min.x,t.max.y,t.max.z),e[6].set(t.max.x,t.max.y,t.max.z),e[7].set(t.max.x,t.min.y,t.max.z),e},l=(()=>{const t=new i.Vector3,e=new i.Vector3;return(n,r,s)=>{r=r||new i.Box3,t.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e.set(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(const i of n)s&&i.applyMatrix4(s),t.x=Math.min(t.x,i.x),t.y=Math.min(t.y,i.y),t.z=Math.min(t.z,i.z),e.x=Math.max(e.x,i.x),e.y=Math.max(e.y,i.y),e.z=Math.max(e.z,i.z);return r.min.copy(t),r.max.copy(e),r}})()},51666:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(25481);function r(t){if(t&&"object"==typeof t&&"x"in t&&"y"in t&&"z"in t){const e=t;return(0,i.Et)(e.x)&&(0,i.Et)(e.y)&&(0,i.Et)(e.z)}return!1}}}]);